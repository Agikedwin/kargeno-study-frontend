{"ast":null,"code":"/*!\nFullCalendar Timeline Plugin v4.4.3\nDocs & License: https://fullcalendar.io/scheduler\n(c) 2019 Adam Shaw\n*/\n\nimport { htmlToElement, forceClassName, applyStyle, debounce, preventDefault, ScrollComponent, EmitterMixin, removeElement, createElement, computeEdges, asRoughMs, isSingleDay, getDayClasses, findElements, Component, PositionCache, findChildren, isInt, multiplyDuration, config, createFormatter, greatestDurationDenominator, createDuration, wholeDivideDurations, addDays, startOfDay, computeVisibleDayRange, asRoughMinutes, padStart, asRoughSeconds, diffWholeDays, buildGotoAnchorHtml, htmlEscape, translateRect, memoizeRendering, rangeContainsMarker, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, computeHeightAndMargins, applyStyleProp, FgEventRenderer, FillRenderer, DateComponent, intersectRanges, addMs, Slicer, View, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\n/*\nA rectangular area of content that lives within a Scroller.\nCan have \"gutters\", areas of dead spacing around the perimeter.\nAlso very useful for forcing a width, which a Scroller cannot do alone.\nHas a content area that lives above a background area.\n*/\nvar ScrollerCanvas = /** @class */function () {\n  function ScrollerCanvas() {\n    this.gutters = {};\n    this.el = htmlToElement(\"<div class=\\\"fc-scroller-canvas\\\"> <div class=\\\"fc-content\\\"></div> <div class=\\\"fc-bg\\\"></div> </div>\");\n    this.contentEl = this.el.querySelector('.fc-content');\n    this.bgEl = this.el.querySelector('.fc-bg');\n  }\n  /*\n  If falsy, resets all the gutters to 0\n  */\n  ScrollerCanvas.prototype.setGutters = function (gutters) {\n    if (!gutters) {\n      this.gutters = {};\n    } else {\n      __assign(this.gutters, gutters);\n    }\n    this.updateSize();\n  };\n  ScrollerCanvas.prototype.setWidth = function (width) {\n    this.width = width;\n    this.updateSize();\n  };\n  ScrollerCanvas.prototype.setMinWidth = function (minWidth) {\n    this.minWidth = minWidth;\n    this.updateSize();\n  };\n  ScrollerCanvas.prototype.clearWidth = function () {\n    this.width = null;\n    this.minWidth = null;\n    this.updateSize();\n  };\n  ScrollerCanvas.prototype.updateSize = function () {\n    var _a = this,\n      gutters = _a.gutters,\n      el = _a.el;\n    // is border-box (width includes padding)\n    forceClassName(el, 'fc-gutter-left', gutters.left);\n    forceClassName(el, 'fc-gutter-right', gutters.right);\n    forceClassName(el, 'fc-gutter-top', gutters.top);\n    forceClassName(el, 'fc-gutter-bottom', gutters.bottom);\n    applyStyle(el, {\n      paddingLeft: gutters.left || '',\n      paddingRight: gutters.right || '',\n      paddingTop: gutters.top || '',\n      paddingBottom: gutters.bottom || '',\n      width: this.width != null ? this.width + (gutters.left || 0) + (gutters.right || 0) : '',\n      minWidth: this.minWidth != null ? this.minWidth + (gutters.left || 0) + (gutters.right || 0) : ''\n    });\n    applyStyle(this.bgEl, {\n      left: gutters.left || '',\n      right: gutters.right || '',\n      top: gutters.top || '',\n      bottom: gutters.bottom || ''\n    });\n  };\n  return ScrollerCanvas;\n}();\nvar EnhancedScroller = /** @class */function (_super) {\n  __extends(EnhancedScroller, _super);\n  function EnhancedScroller(overflowX, overflowY) {\n    var _this = _super.call(this, overflowX, overflowY) || this;\n    // Scroll Events\n    // ----------------------------------------------------------------------------------------------\n    _this.reportScroll = function () {\n      if (!_this.isScrolling) {\n        _this.reportScrollStart();\n      }\n      _this.trigger('scroll');\n      _this.isMoving = true;\n      _this.requestMovingEnd();\n    };\n    _this.reportScrollStart = function () {\n      if (!_this.isScrolling) {\n        _this.isScrolling = true;\n        _this.trigger('scrollStart', _this.isTouching); // created in constructor\n      }\n    };\n    // Touch Events\n    // ----------------------------------------------------------------------------------------------\n    // will fire *before* the scroll event is fired\n    _this.reportTouchStart = function () {\n      _this.isTouching = true;\n    };\n    _this.reportTouchEnd = function () {\n      if (_this.isTouching) {\n        _this.isTouching = false;\n        // if touch scrolling was re-enabled during a recent touch scroll\n        // then unbind the handlers that are preventing it from happening.\n        if (_this.isTouchScrollEnabled) {\n          _this.unbindPreventTouchScroll(); // won't do anything if not bound\n        }\n        // if the user ended their touch, and the scroll area wasn't moving,\n        // we consider this to be the end of the scroll.\n        if (!_this.isMoving) {\n          _this.reportScrollEnd(); // won't fire if already ended\n        }\n      }\n    };\n\n    _this.isScrolling = false;\n    _this.isTouching = false;\n    _this.isMoving = false;\n    _this.isTouchScrollEnabled = true;\n    _this.requestMovingEnd = debounce(_this.reportMovingEnd, 500);\n    _this.canvas = new ScrollerCanvas();\n    _this.el.appendChild(_this.canvas.el);\n    _this.applyOverflow();\n    _this.bindHandlers();\n    return _this;\n  }\n  EnhancedScroller.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.unbindHandlers();\n  };\n  // Touch scroll prevention\n  // ----------------------------------------------------------------------------------------------\n  EnhancedScroller.prototype.disableTouchScroll = function () {\n    this.isTouchScrollEnabled = false;\n    this.bindPreventTouchScroll(); // will be unbound in enableTouchScroll or reportTouchEnd\n  };\n\n  EnhancedScroller.prototype.enableTouchScroll = function () {\n    this.isTouchScrollEnabled = true;\n    // only immediately unbind if a touch event is NOT in progress.\n    // otherwise, it will be handled by reportTouchEnd.\n    if (!this.isTouching) {\n      this.unbindPreventTouchScroll();\n    }\n  };\n  EnhancedScroller.prototype.bindPreventTouchScroll = function () {\n    if (!this.preventTouchScrollHandler) {\n      this.el.addEventListener('touchmove', this.preventTouchScrollHandler = preventDefault);\n    }\n  };\n  EnhancedScroller.prototype.unbindPreventTouchScroll = function () {\n    if (this.preventTouchScrollHandler) {\n      this.el.removeEventListener('touchmove', this.preventTouchScrollHandler);\n      this.preventTouchScrollHandler = null;\n    }\n  };\n  // Handlers\n  // ----------------------------------------------------------------------------------------------\n  EnhancedScroller.prototype.bindHandlers = function () {\n    this.el.addEventListener('scroll', this.reportScroll);\n    this.el.addEventListener('touchstart', this.reportTouchStart, {\n      passive: true\n    });\n    this.el.addEventListener('touchend', this.reportTouchEnd);\n  };\n  EnhancedScroller.prototype.unbindHandlers = function () {\n    this.el.removeEventListener('scroll', this.reportScroll);\n    this.el.removeEventListener('touchstart', this.reportTouchStart, {\n      passive: true\n    });\n    this.el.removeEventListener('touchend', this.reportTouchEnd);\n  };\n  EnhancedScroller.prototype.reportMovingEnd = function () {\n    this.isMoving = false;\n    // only end the scroll if not currently touching.\n    // if touching, the scrolling will end later, on touchend.\n    if (!this.isTouching) {\n      this.reportScrollEnd();\n    }\n  };\n  EnhancedScroller.prototype.reportScrollEnd = function () {\n    if (this.isScrolling) {\n      this.trigger('scrollEnd');\n      this.isScrolling = false;\n    }\n  };\n  // Horizontal Scroll Normalization\n  // ----------------------------------------------------------------------------------------------\n  // http://stackoverflow.com/questions/24276619/better-way-to-get-the-viewport-of-a-scrollable-div-in-rtl-mode/24394376#24394376\n  // TODO: move all this to util functions\n  /*\n  If RTL, and scrolled to the left, returns NEGATIVE value (like Firefox)\n  */\n  EnhancedScroller.prototype.getScrollLeft = function () {\n    var el = this.el;\n    var direction = window.getComputedStyle(el).direction;\n    var val = el.scrollLeft;\n    if (direction === 'rtl') {\n      switch (getRtlScrollSystem()) {\n        case 'positive':\n          val = val + el.clientWidth - el.scrollWidth;\n          break;\n        case 'reverse':\n          val = -val;\n          break;\n      }\n    }\n    return val;\n  };\n  /*\n  Accepts a NEGATIVE value for when scrolled in RTL\n  */\n  EnhancedScroller.prototype.setScrollLeft = function (val) {\n    var el = this.el;\n    var direction = window.getComputedStyle(el).direction;\n    if (direction === 'rtl') {\n      switch (getRtlScrollSystem()) {\n        case 'positive':\n          val = val - el.clientWidth + el.scrollWidth;\n          break;\n        case 'reverse':\n          val = -val;\n          break;\n      }\n    }\n    el.scrollLeft = val;\n  };\n  /*\n  Always returns the number of pixels scrolled from the leftmost position (even if RTL).\n  Always positive.\n  */\n  EnhancedScroller.prototype.getScrollFromLeft = function () {\n    var el = this.el;\n    var direction = window.getComputedStyle(el).direction;\n    var val = el.scrollLeft;\n    if (direction === 'rtl') {\n      switch (getRtlScrollSystem()) {\n        case 'negative':\n          val = val - el.clientWidth + el.scrollWidth;\n          break;\n        case 'reverse':\n          val = -val - el.clientWidth + el.scrollWidth;\n          break;\n      }\n    }\n    return val;\n  };\n  return EnhancedScroller;\n}(ScrollComponent);\nEmitterMixin.mixInto(EnhancedScroller);\n// Horizontal Scroll System Detection\n// ----------------------------------------------------------------------------------------------\nvar _rtlScrollSystem;\nfunction getRtlScrollSystem() {\n  return _rtlScrollSystem || (_rtlScrollSystem = detectRtlScrollSystem());\n}\nfunction detectRtlScrollSystem() {\n  var el = htmlToElement(\"<div style=\\\" position: absolute; top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 100px; \\\">A</div>\");\n  document.body.appendChild(el);\n  var system;\n  if (el.scrollLeft > 0) {\n    system = 'positive';\n  } else {\n    el.scrollLeft = 1;\n    if (el.scrollLeft > 0) {\n      system = 'reverse';\n    } else {\n      system = 'negative';\n    }\n  }\n  removeElement(el);\n  return system;\n}\n\n/*\nA Scroller, but with a wrapping div that allows \"clipping\" away of native scrollbars,\ngiving the appearance that there are no scrollbars.\n*/\nvar ClippedScroller = /** @class */function () {\n  /*\n  Received overflows can be set to 'clipped', meaning scrollbars shouldn't be visible\n  to the user, but the area should still scroll.\n  */\n  function ClippedScroller(overflowX, overflowY, parentEl) {\n    this.isHScrollbarsClipped = false;\n    this.isVScrollbarsClipped = false;\n    if (overflowX === 'clipped-scroll') {\n      overflowX = 'scroll';\n      this.isHScrollbarsClipped = true;\n    }\n    if (overflowY === 'clipped-scroll') {\n      overflowY = 'scroll';\n      this.isVScrollbarsClipped = true;\n    }\n    this.enhancedScroll = new EnhancedScroller(overflowX, overflowY);\n    parentEl.appendChild(this.el = createElement('div', {\n      className: 'fc-scroller-clip'\n    }));\n    this.el.appendChild(this.enhancedScroll.el);\n  }\n  ClippedScroller.prototype.destroy = function () {\n    removeElement(this.el);\n  };\n  ClippedScroller.prototype.updateSize = function () {\n    var enhancedScroll = this.enhancedScroll;\n    var scrollEl = enhancedScroll.el;\n    var edges = computeEdges(scrollEl);\n    var cssProps = {\n      marginLeft: 0,\n      marginRight: 0,\n      marginTop: 0,\n      marginBottom: 0\n    };\n    // give the inner scrolling div negative margins so that its scrollbars\n    // are nudged outside of the bounding box of the wrapper, which is overflow:hidden\n    if (this.isVScrollbarsClipped) {\n      cssProps.marginLeft = -edges.scrollbarLeft;\n      cssProps.marginRight = -edges.scrollbarRight;\n    }\n    if (this.isHScrollbarsClipped) {\n      cssProps.marginBottom = -edges.scrollbarBottom;\n    }\n    applyStyle(scrollEl, cssProps);\n    // if we are attempting to hide the scrollbars offscreen, OSX/iOS will still\n    // display the floating scrollbars. attach a className to force-hide them.\n    if ((this.isHScrollbarsClipped || enhancedScroll.overflowX === 'hidden') && (\n    // should never show?\n    this.isVScrollbarsClipped || enhancedScroll.overflowY === 'hidden') &&\n    // should never show?\n    !(\n    // doesn't have any scrollbar mass\n    edges.scrollbarLeft || edges.scrollbarRight || edges.scrollbarBottom)) {\n      scrollEl.classList.add('fc-no-scrollbars');\n    } else {\n      scrollEl.classList.remove('fc-no-scrollbars');\n    }\n  };\n  ClippedScroller.prototype.setHeight = function (height) {\n    this.enhancedScroll.setHeight(height);\n  };\n  /*\n  Accounts for 'clipped' scrollbars\n  */\n  ClippedScroller.prototype.getScrollbarWidths = function () {\n    var widths = this.enhancedScroll.getScrollbarWidths();\n    if (this.isVScrollbarsClipped) {\n      widths.left = 0;\n      widths.right = 0;\n    }\n    if (this.isHScrollbarsClipped) {\n      widths.bottom = 0;\n    }\n    return widths;\n  };\n  return ClippedScroller;\n}();\nvar ScrollJoiner = /** @class */function () {\n  function ScrollJoiner(axis, scrollers) {\n    this.axis = axis;\n    this.scrollers = scrollers;\n    for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n      var scroller = _a[_i];\n      this.initScroller(scroller);\n    }\n  }\n  ScrollJoiner.prototype.initScroller = function (scroller) {\n    var _this = this;\n    var enhancedScroll = scroller.enhancedScroll;\n    // when the user scrolls via mousewheel, we know for sure the target\n    // scroller should be the master. capture the various x-browser events that fire.\n    var onScroll = function () {\n      _this.assignMasterScroller(scroller);\n    };\n    'wheel mousewheel DomMouseScroll MozMousePixelScroll'.split(' ').forEach(function (evName) {\n      enhancedScroll.el.addEventListener(evName, onScroll);\n    });\n    enhancedScroll.on('scrollStart', function () {\n      if (!_this.masterScroller) {\n        _this.assignMasterScroller(scroller);\n      }\n    }).on('scroll', function () {\n      if (scroller === _this.masterScroller) {\n        for (var _i = 0, _a = _this.scrollers; _i < _a.length; _i++) {\n          var otherScroller = _a[_i];\n          if (otherScroller !== scroller) {\n            switch (_this.axis) {\n              case 'horizontal':\n                otherScroller.enhancedScroll.el.scrollLeft = enhancedScroll.el.scrollLeft;\n                break;\n              case 'vertical':\n                otherScroller.enhancedScroll.setScrollTop(enhancedScroll.getScrollTop());\n                break;\n            }\n          }\n        }\n      }\n    }).on('scrollEnd', function () {\n      if (scroller === _this.masterScroller) {\n        _this.unassignMasterScroller();\n      }\n    });\n  };\n  ScrollJoiner.prototype.assignMasterScroller = function (scroller) {\n    this.unassignMasterScroller();\n    this.masterScroller = scroller;\n    for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n      var otherScroller = _a[_i];\n      if (otherScroller !== scroller) {\n        otherScroller.enhancedScroll.disableTouchScroll();\n      }\n    }\n  };\n  ScrollJoiner.prototype.unassignMasterScroller = function () {\n    if (this.masterScroller) {\n      for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n        var otherScroller = _a[_i];\n        otherScroller.enhancedScroll.enableTouchScroll();\n      }\n      this.masterScroller = null;\n    }\n  };\n  ScrollJoiner.prototype.update = function () {\n    var allWidths = this.scrollers.map(function (scroller) {\n      return scroller.getScrollbarWidths();\n    });\n    var maxLeft = 0;\n    var maxRight = 0;\n    var maxTop = 0;\n    var maxBottom = 0;\n    var widths;\n    var i;\n    for (var _i = 0, allWidths_1 = allWidths; _i < allWidths_1.length; _i++) {\n      widths = allWidths_1[_i];\n      maxLeft = Math.max(maxLeft, widths.left);\n      maxRight = Math.max(maxRight, widths.right);\n      maxTop = Math.max(maxTop, widths.top);\n      maxBottom = Math.max(maxBottom, widths.bottom);\n    }\n    for (i = 0; i < this.scrollers.length; i++) {\n      var scroller = this.scrollers[i];\n      widths = allWidths[i];\n      scroller.enhancedScroll.canvas.setGutters(this.axis === 'horizontal' ? {\n        left: maxLeft - widths.left,\n        right: maxRight - widths.right\n      } : {\n        top: maxTop - widths.top,\n        bottom: maxBottom - widths.bottom\n      });\n    }\n  };\n  return ScrollJoiner;\n}();\nvar HeaderBodyLayout = /** @class */function () {\n  /*\n  verticalScroll = 'auto' | 'clipped-scroll'\n  */\n  function HeaderBodyLayout(headerContainerEl, bodyContainerEl, verticalScroll) {\n    this.headerScroller = new ClippedScroller('clipped-scroll', 'hidden', headerContainerEl);\n    this.bodyScroller = new ClippedScroller('auto', verticalScroll, bodyContainerEl);\n    this.scrollJoiner = new ScrollJoiner('horizontal', [this.headerScroller, this.bodyScroller]);\n  }\n  HeaderBodyLayout.prototype.destroy = function () {\n    this.headerScroller.destroy();\n    this.bodyScroller.destroy();\n  };\n  HeaderBodyLayout.prototype.setHeight = function (totalHeight, isAuto) {\n    var bodyHeight;\n    if (isAuto) {\n      bodyHeight = 'auto';\n    } else {\n      bodyHeight = totalHeight - this.queryHeadHeight();\n    }\n    this.bodyScroller.setHeight(bodyHeight);\n    this.headerScroller.updateSize(); // adjusts gutters and classNames\n    this.bodyScroller.updateSize(); // adjusts gutters and classNames\n    this.scrollJoiner.update();\n  };\n  HeaderBodyLayout.prototype.queryHeadHeight = function () {\n    return this.headerScroller.enhancedScroll.canvas.contentEl.getBoundingClientRect().height;\n  };\n  return HeaderBodyLayout;\n}();\nvar TimelineHeader = /** @class */function (_super) {\n  __extends(TimelineHeader, _super);\n  function TimelineHeader(parentEl) {\n    var _this = _super.call(this) || this;\n    _this.parentEl = parentEl;\n    return _this;\n  }\n  TimelineHeader.prototype.firstContext = function (context) {\n    this.parentEl.appendChild(this.tableEl = createElement('table', {\n      className: context.theme.getClass('tableGrid')\n    }));\n  };\n  TimelineHeader.prototype.destroy = function () {\n    removeElement(this.tableEl);\n    _super.prototype.destroy.call(this);\n  };\n  TimelineHeader.prototype.render = function (props) {\n    this.renderDates(props.tDateProfile);\n  };\n  TimelineHeader.prototype.renderDates = function (tDateProfile) {\n    var _a = this.context,\n      dateEnv = _a.dateEnv,\n      theme = _a.theme;\n    var cellRows = tDateProfile.cellRows;\n    var lastRow = cellRows[cellRows.length - 1];\n    var isChrono = asRoughMs(tDateProfile.labelInterval) > asRoughMs(tDateProfile.slotDuration);\n    var oneDay = isSingleDay(tDateProfile.slotDuration);\n    var html = '<colgroup>';\n    // needs to be a col for each body slat. header cells will have colspans\n    for (var i = tDateProfile.slotCnt - 1; i >= 0; i--) {\n      html += '<col/>';\n    }\n    html += '</colgroup>';\n    html += '<tbody>';\n    for (var _i = 0, cellRows_1 = cellRows; _i < cellRows_1.length; _i++) {\n      var rowCells = cellRows_1[_i];\n      var isLast = rowCells === lastRow;\n      html += '<tr' + (isChrono && isLast ? ' class=\"fc-chrono\"' : '') + '>';\n      for (var _b = 0, rowCells_1 = rowCells; _b < rowCells_1.length; _b++) {\n        var cell = rowCells_1[_b];\n        var headerCellClassNames = [theme.getClass('widgetHeader')];\n        if (cell.isWeekStart) {\n          headerCellClassNames.push('fc-em-cell');\n        }\n        if (oneDay) {\n          headerCellClassNames = headerCellClassNames.concat(getDayClasses(cell.date, this.props.dateProfile, this.context, true) // adds \"today\" class and other day-based classes\n          );\n        }\n\n        html += '<th class=\"' + headerCellClassNames.join(' ') + '\"' + ' data-date=\"' + dateEnv.formatIso(cell.date, {\n          omitTime: !tDateProfile.isTimeScale,\n          omitTimeZoneOffset: true\n        }) + '\"' + (cell.colspan > 1 ? ' colspan=\"' + cell.colspan + '\"' : '') + '>' + '<div class=\"fc-cell-content\">' + cell.spanHtml + '</div>' + '</th>';\n      }\n      html += '</tr>';\n    }\n    html += '</tbody>';\n    this.tableEl.innerHTML = html; // TODO: does this work cross-browser?\n    this.slatColEls = findElements(this.tableEl, 'col');\n    this.innerEls = findElements(this.tableEl.querySelector('tr:last-child'),\n    // compound selector won't work because of query-root problem\n    'th .fc-cell-text');\n    findElements(this.tableEl.querySelectorAll('tr:not(:last-child)'),\n    // compound selector won't work because of query-root problem\n    'th .fc-cell-text').forEach(function (innerEl) {\n      innerEl.classList.add('fc-sticky');\n    });\n  };\n  return TimelineHeader;\n}(Component);\nvar TimelineSlats = /** @class */function (_super) {\n  __extends(TimelineSlats, _super);\n  function TimelineSlats(parentEl) {\n    var _this = _super.call(this) || this;\n    parentEl.appendChild(_this.el = createElement('div', {\n      className: 'fc-slats'\n    }));\n    return _this;\n  }\n  TimelineSlats.prototype.destroy = function () {\n    removeElement(this.el);\n    _super.prototype.destroy.call(this);\n  };\n  TimelineSlats.prototype.render = function (props) {\n    this.renderDates(props.tDateProfile);\n  };\n  TimelineSlats.prototype.renderDates = function (tDateProfile) {\n    var _a = this.context,\n      calendar = _a.calendar,\n      view = _a.view,\n      theme = _a.theme,\n      dateEnv = _a.dateEnv;\n    var slotDates = tDateProfile.slotDates,\n      isWeekStarts = tDateProfile.isWeekStarts;\n    var html = '<table class=\"' + theme.getClass('tableGrid') + '\">' + '<colgroup>';\n    for (var i = 0; i < slotDates.length; i++) {\n      html += '<col/>';\n    }\n    html += '</colgroup>';\n    html += '<tbody><tr>';\n    for (var i = 0; i < slotDates.length; i++) {\n      html += this.slatCellHtml(slotDates[i], isWeekStarts[i], tDateProfile);\n    }\n    html += '</tr></tbody></table>';\n    this.el.innerHTML = html;\n    this.slatColEls = findElements(this.el, 'col');\n    this.slatEls = findElements(this.el, 'td');\n    for (var i = 0; i < slotDates.length; i++) {\n      calendar.publiclyTrigger('dayRender', [{\n        date: dateEnv.toDate(slotDates[i]),\n        el: this.slatEls[i],\n        view: view\n      }]);\n    }\n    this.outerCoordCache = new PositionCache(this.el, this.slatEls, true,\n    // isHorizontal\n    false // isVertical\n    );\n    // for the inner divs within the slats\n    // used for event rendering and scrollTime, to disregard slat border\n    this.innerCoordCache = new PositionCache(this.el, findChildren(this.slatEls, 'div'), true,\n    // isHorizontal\n    false // isVertical\n    );\n  };\n\n  TimelineSlats.prototype.slatCellHtml = function (date, isEm, tDateProfile) {\n    var _a = this.context,\n      theme = _a.theme,\n      dateEnv = _a.dateEnv;\n    var classes;\n    if (tDateProfile.isTimeScale) {\n      classes = [];\n      classes.push(isInt(dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.labelInterval)) ? 'fc-major' : 'fc-minor');\n    } else {\n      classes = getDayClasses(date, this.props.dateProfile, this.context);\n      classes.push('fc-day');\n    }\n    classes.unshift(theme.getClass('widgetContent'));\n    if (isEm) {\n      classes.push('fc-em-cell');\n    }\n    return '<td class=\"' + classes.join(' ') + '\"' + ' data-date=\"' + dateEnv.formatIso(date, {\n      omitTime: !tDateProfile.isTimeScale,\n      omitTimeZoneOffset: true\n    }) + '\"' + '><div></div></td>';\n  };\n  TimelineSlats.prototype.updateSize = function () {\n    this.outerCoordCache.build();\n    this.innerCoordCache.build();\n  };\n  TimelineSlats.prototype.positionToHit = function (leftPosition) {\n    var outerCoordCache = this.outerCoordCache;\n    var _a = this.context,\n      dateEnv = _a.dateEnv,\n      isRtl = _a.isRtl;\n    var tDateProfile = this.props.tDateProfile;\n    var slatIndex = outerCoordCache.leftToIndex(leftPosition);\n    if (slatIndex != null) {\n      // somewhat similar to what TimeGrid does. consolidate?\n      var slatWidth = outerCoordCache.getWidth(slatIndex);\n      var partial = isRtl ? (outerCoordCache.rights[slatIndex] - leftPosition) / slatWidth : (leftPosition - outerCoordCache.lefts[slatIndex]) / slatWidth;\n      var localSnapIndex = Math.floor(partial * tDateProfile.snapsPerSlot);\n      var start = dateEnv.add(tDateProfile.slotDates[slatIndex], multiplyDuration(tDateProfile.snapDuration, localSnapIndex));\n      var end = dateEnv.add(start, tDateProfile.snapDuration);\n      return {\n        dateSpan: {\n          range: {\n            start: start,\n            end: end\n          },\n          allDay: !this.props.tDateProfile.isTimeScale\n        },\n        dayEl: this.slatColEls[slatIndex],\n        left: outerCoordCache.lefts[slatIndex],\n        right: outerCoordCache.rights[slatIndex]\n      };\n    }\n    return null;\n  };\n  return TimelineSlats;\n}(Component);\nvar MIN_AUTO_LABELS = 18; // more than `12` months but less that `24` hours\nvar MAX_AUTO_SLOTS_PER_LABEL = 6; // allows 6 10-min slots in an hour\nvar MAX_AUTO_CELLS = 200; // allows 4-days to have a :30 slot duration\nconfig.MAX_TIMELINE_SLOTS = 1000;\n// potential nice values for slot-duration and interval-duration\nvar STOCK_SUB_DURATIONS = [{\n  years: 1\n}, {\n  months: 1\n}, {\n  days: 1\n}, {\n  hours: 1\n}, {\n  minutes: 30\n}, {\n  minutes: 15\n}, {\n  minutes: 10\n}, {\n  minutes: 5\n}, {\n  minutes: 1\n}, {\n  seconds: 30\n}, {\n  seconds: 15\n}, {\n  seconds: 10\n}, {\n  seconds: 5\n}, {\n  seconds: 1\n}, {\n  milliseconds: 500\n}, {\n  milliseconds: 100\n}, {\n  milliseconds: 10\n}, {\n  milliseconds: 1\n}];\nfunction buildTimelineDateProfile(dateProfile, dateEnv, allOptions, dateProfileGenerator) {\n  var tDateProfile = {\n    labelInterval: queryDurationOption(allOptions, 'slotLabelInterval'),\n    slotDuration: queryDurationOption(allOptions, 'slotDuration')\n  };\n  validateLabelAndSlot(tDateProfile, dateProfile, dateEnv); // validate after computed grid duration\n  ensureLabelInterval(tDateProfile, dateProfile, dateEnv);\n  ensureSlotDuration(tDateProfile, dateProfile, dateEnv);\n  var input = allOptions.slotLabelFormat;\n  var rawFormats = Array.isArray(input) ? input : input != null ? [input] : computeHeaderFormats(tDateProfile, dateProfile, dateEnv, allOptions);\n  tDateProfile.headerFormats = rawFormats.map(function (rawFormat) {\n    return createFormatter(rawFormat);\n  });\n  tDateProfile.isTimeScale = Boolean(tDateProfile.slotDuration.milliseconds);\n  var largeUnit = null;\n  if (!tDateProfile.isTimeScale) {\n    var slotUnit = greatestDurationDenominator(tDateProfile.slotDuration).unit;\n    if (/year|month|week/.test(slotUnit)) {\n      largeUnit = slotUnit;\n    }\n  }\n  tDateProfile.largeUnit = largeUnit;\n  tDateProfile.emphasizeWeeks = isSingleDay(tDateProfile.slotDuration) && currentRangeAs('weeks', dateProfile, dateEnv) >= 2 && !allOptions.businessHours;\n  /*\n  console.log('label interval =', timelineView.labelInterval.humanize())\n  console.log('slot duration =', timelineView.slotDuration.humanize())\n  console.log('header formats =', timelineView.headerFormats)\n  console.log('isTimeScale', timelineView.isTimeScale)\n  console.log('largeUnit', timelineView.largeUnit)\n  */\n  var rawSnapDuration = allOptions.snapDuration;\n  var snapDuration;\n  var snapsPerSlot;\n  if (rawSnapDuration) {\n    snapDuration = createDuration(rawSnapDuration);\n    snapsPerSlot = wholeDivideDurations(tDateProfile.slotDuration, snapDuration);\n    // ^ TODO: warning if not whole?\n  }\n\n  if (snapsPerSlot == null) {\n    snapDuration = tDateProfile.slotDuration;\n    snapsPerSlot = 1;\n  }\n  tDateProfile.snapDuration = snapDuration;\n  tDateProfile.snapsPerSlot = snapsPerSlot;\n  // more...\n  var timeWindowMs = asRoughMs(dateProfile.maxTime) - asRoughMs(dateProfile.minTime);\n  // TODO: why not use normalizeRange!?\n  var normalizedStart = normalizeDate(dateProfile.renderRange.start, tDateProfile, dateEnv);\n  var normalizedEnd = normalizeDate(dateProfile.renderRange.end, tDateProfile, dateEnv);\n  // apply minTime/maxTime\n  // TODO: View should be responsible.\n  if (tDateProfile.isTimeScale) {\n    normalizedStart = dateEnv.add(normalizedStart, dateProfile.minTime);\n    normalizedEnd = dateEnv.add(addDays(normalizedEnd, -1), dateProfile.maxTime);\n  }\n  tDateProfile.timeWindowMs = timeWindowMs;\n  tDateProfile.normalizedRange = {\n    start: normalizedStart,\n    end: normalizedEnd\n  };\n  var slotDates = [];\n  var date = normalizedStart;\n  while (date < normalizedEnd) {\n    if (isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator)) {\n      slotDates.push(date);\n    }\n    date = dateEnv.add(date, tDateProfile.slotDuration);\n  }\n  tDateProfile.slotDates = slotDates;\n  // more...\n  var snapIndex = -1;\n  var snapDiff = 0; // index of the diff :(\n  var snapDiffToIndex = [];\n  var snapIndexToDiff = [];\n  date = normalizedStart;\n  while (date < normalizedEnd) {\n    if (isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator)) {\n      snapIndex++;\n      snapDiffToIndex.push(snapIndex);\n      snapIndexToDiff.push(snapDiff);\n    } else {\n      snapDiffToIndex.push(snapIndex + 0.5);\n    }\n    date = dateEnv.add(date, tDateProfile.snapDuration);\n    snapDiff++;\n  }\n  tDateProfile.snapDiffToIndex = snapDiffToIndex;\n  tDateProfile.snapIndexToDiff = snapIndexToDiff;\n  tDateProfile.snapCnt = snapIndex + 1; // is always one behind\n  tDateProfile.slotCnt = tDateProfile.snapCnt / tDateProfile.snapsPerSlot;\n  // more...\n  tDateProfile.isWeekStarts = buildIsWeekStarts(tDateProfile, dateEnv);\n  tDateProfile.cellRows = buildCellRows(tDateProfile, dateEnv, allOptions);\n  return tDateProfile;\n}\n/*\nsnaps to appropriate unit\n*/\nfunction normalizeDate(date, tDateProfile, dateEnv) {\n  var normalDate = date;\n  if (!tDateProfile.isTimeScale) {\n    normalDate = startOfDay(normalDate);\n    if (tDateProfile.largeUnit) {\n      normalDate = dateEnv.startOf(normalDate, tDateProfile.largeUnit);\n    }\n  }\n  return normalDate;\n}\n/*\nsnaps to appropriate unit\n*/\nfunction normalizeRange(range, tDateProfile, dateEnv) {\n  if (!tDateProfile.isTimeScale) {\n    range = computeVisibleDayRange(range);\n    if (tDateProfile.largeUnit) {\n      var dayRange = range; // preserve original result\n      range = {\n        start: dateEnv.startOf(range.start, tDateProfile.largeUnit),\n        end: dateEnv.startOf(range.end, tDateProfile.largeUnit)\n      };\n      // if date is partially through the interval, or is in the same interval as the start,\n      // make the exclusive end be the *next* interval\n      if (range.end.valueOf() !== dayRange.end.valueOf() || range.end <= range.start) {\n        range = {\n          start: range.start,\n          end: dateEnv.add(range.end, tDateProfile.slotDuration)\n        };\n      }\n    }\n  }\n  return range;\n}\nfunction isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator) {\n  if (dateProfileGenerator.isHiddenDay(date)) {\n    return false;\n  } else if (tDateProfile.isTimeScale) {\n    // determine if the time is within minTime/maxTime, which may have wacky values\n    var day = startOfDay(date);\n    var timeMs = date.valueOf() - day.valueOf();\n    var ms = timeMs - asRoughMs(dateProfile.minTime); // milliseconds since minTime\n    ms = (ms % 86400000 + 86400000) % 86400000; // make negative values wrap to 24hr clock\n    return ms < tDateProfile.timeWindowMs; // before the maxTime?\n  } else {\n    return true;\n  }\n}\nfunction queryDurationOption(allOptions, name) {\n  var input = allOptions[name];\n  if (input != null) {\n    return createDuration(input);\n  }\n}\nfunction validateLabelAndSlot(tDateProfile, dateProfile, dateEnv) {\n  var currentRange = dateProfile.currentRange;\n  // make sure labelInterval doesn't exceed the max number of cells\n  if (tDateProfile.labelInterval) {\n    var labelCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, tDateProfile.labelInterval);\n    if (labelCnt > config.MAX_TIMELINE_SLOTS) {\n      console.warn('slotLabelInterval results in too many cells');\n      tDateProfile.labelInterval = null;\n    }\n  }\n  // make sure slotDuration doesn't exceed the maximum number of cells\n  if (tDateProfile.slotDuration) {\n    var slotCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, tDateProfile.slotDuration);\n    if (slotCnt > config.MAX_TIMELINE_SLOTS) {\n      console.warn('slotDuration results in too many cells');\n      tDateProfile.slotDuration = null;\n    }\n  }\n  // make sure labelInterval is a multiple of slotDuration\n  if (tDateProfile.labelInterval && tDateProfile.slotDuration) {\n    var slotsPerLabel = wholeDivideDurations(tDateProfile.labelInterval, tDateProfile.slotDuration);\n    if (slotsPerLabel === null || slotsPerLabel < 1) {\n      console.warn('slotLabelInterval must be a multiple of slotDuration');\n      tDateProfile.slotDuration = null;\n    }\n  }\n}\nfunction ensureLabelInterval(tDateProfile, dateProfile, dateEnv) {\n  var currentRange = dateProfile.currentRange;\n  var labelInterval = tDateProfile.labelInterval;\n  if (!labelInterval) {\n    // compute based off the slot duration\n    // find the largest label interval with an acceptable slots-per-label\n    var input = void 0;\n    if (tDateProfile.slotDuration) {\n      for (var _i = 0, STOCK_SUB_DURATIONS_1 = STOCK_SUB_DURATIONS; _i < STOCK_SUB_DURATIONS_1.length; _i++) {\n        input = STOCK_SUB_DURATIONS_1[_i];\n        var tryLabelInterval = createDuration(input);\n        var slotsPerLabel = wholeDivideDurations(tryLabelInterval, tDateProfile.slotDuration);\n        if (slotsPerLabel !== null && slotsPerLabel <= MAX_AUTO_SLOTS_PER_LABEL) {\n          labelInterval = tryLabelInterval;\n          break;\n        }\n      }\n      // use the slot duration as a last resort\n      if (!labelInterval) {\n        labelInterval = tDateProfile.slotDuration;\n      }\n      // compute based off the view's duration\n      // find the largest label interval that yields the minimum number of labels\n    } else {\n      for (var _a = 0, STOCK_SUB_DURATIONS_2 = STOCK_SUB_DURATIONS; _a < STOCK_SUB_DURATIONS_2.length; _a++) {\n        input = STOCK_SUB_DURATIONS_2[_a];\n        labelInterval = createDuration(input);\n        var labelCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, labelInterval);\n        if (labelCnt >= MIN_AUTO_LABELS) {\n          break;\n        }\n      }\n    }\n    tDateProfile.labelInterval = labelInterval;\n  }\n  return labelInterval;\n}\nfunction ensureSlotDuration(tDateProfile, dateProfile, dateEnv) {\n  var currentRange = dateProfile.currentRange;\n  var slotDuration = tDateProfile.slotDuration;\n  if (!slotDuration) {\n    var labelInterval = ensureLabelInterval(tDateProfile, dateProfile, dateEnv); // will compute if necessary\n    // compute based off the label interval\n    // find the largest slot duration that is different from labelInterval, but still acceptable\n    for (var _i = 0, STOCK_SUB_DURATIONS_3 = STOCK_SUB_DURATIONS; _i < STOCK_SUB_DURATIONS_3.length; _i++) {\n      var input = STOCK_SUB_DURATIONS_3[_i];\n      var trySlotDuration = createDuration(input);\n      var slotsPerLabel = wholeDivideDurations(labelInterval, trySlotDuration);\n      if (slotsPerLabel !== null && slotsPerLabel > 1 && slotsPerLabel <= MAX_AUTO_SLOTS_PER_LABEL) {\n        slotDuration = trySlotDuration;\n        break;\n      }\n    }\n    // only allow the value if it won't exceed the view's # of slots limit\n    if (slotDuration) {\n      var slotCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, slotDuration);\n      if (slotCnt > MAX_AUTO_CELLS) {\n        slotDuration = null;\n      }\n    }\n    // use the label interval as a last resort\n    if (!slotDuration) {\n      slotDuration = labelInterval;\n    }\n    tDateProfile.slotDuration = slotDuration;\n  }\n  return slotDuration;\n}\nfunction computeHeaderFormats(tDateProfile, dateProfile, dateEnv, allOptions) {\n  var format1;\n  var format2;\n  var labelInterval = tDateProfile.labelInterval;\n  var unit = greatestDurationDenominator(labelInterval).unit;\n  var weekNumbersVisible = allOptions.weekNumbers;\n  var format0 = format1 = format2 = null;\n  // NOTE: weekNumber computation function wont work\n  if (unit === 'week' && !weekNumbersVisible) {\n    unit = 'day';\n  }\n  switch (unit) {\n    case 'year':\n      format0 = {\n        year: 'numeric'\n      }; // '2015'\n      break;\n    case 'month':\n      if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n        format0 = {\n          year: 'numeric'\n        }; // '2015'\n      }\n\n      format1 = {\n        month: 'short'\n      }; // 'Jan'\n      break;\n    case 'week':\n      if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n        format0 = {\n          year: 'numeric'\n        }; // '2015'\n      }\n\n      format1 = {\n        week: 'narrow'\n      }; // 'Wk4'\n      break;\n    case 'day':\n      if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n        format0 = {\n          year: 'numeric',\n          month: 'long'\n        }; // 'January 2014'\n      } else if (currentRangeAs('months', dateProfile, dateEnv) > 1) {\n        format0 = {\n          month: 'long'\n        }; // 'January'\n      }\n\n      if (weekNumbersVisible) {\n        format1 = {\n          week: 'short'\n        }; // 'Wk 4'\n      }\n\n      format2 = {\n        weekday: 'narrow',\n        day: 'numeric'\n      }; // 'Su 9'\n      break;\n    case 'hour':\n      if (weekNumbersVisible) {\n        format0 = {\n          week: 'short'\n        }; // 'Wk 4'\n      }\n\n      if (currentRangeAs('days', dateProfile, dateEnv) > 1) {\n        format1 = {\n          weekday: 'short',\n          day: 'numeric',\n          month: 'numeric',\n          omitCommas: true\n        }; // Sat 4/7\n      }\n\n      format2 = {\n        hour: 'numeric',\n        minute: '2-digit',\n        omitZeroMinute: true,\n        meridiem: 'short'\n      };\n      break;\n    case 'minute':\n      // sufficiently large number of different minute cells?\n      if (asRoughMinutes(labelInterval) / 60 >= MAX_AUTO_SLOTS_PER_LABEL) {\n        format0 = {\n          hour: 'numeric',\n          meridiem: 'short'\n        };\n        format1 = function (params) {\n          return ':' + padStart(params.date.minute, 2); // ':30'\n        };\n      } else {\n        format0 = {\n          hour: 'numeric',\n          minute: 'numeric',\n          meridiem: 'short'\n        };\n      }\n      break;\n    case 'second':\n      // sufficiently large number of different second cells?\n      if (asRoughSeconds(labelInterval) / 60 >= MAX_AUTO_SLOTS_PER_LABEL) {\n        format0 = {\n          hour: 'numeric',\n          minute: '2-digit',\n          meridiem: 'lowercase'\n        }; // '8:30 PM'\n        format1 = function (params) {\n          return ':' + padStart(params.date.second, 2); // ':30'\n        };\n      } else {\n        format0 = {\n          hour: 'numeric',\n          minute: '2-digit',\n          second: '2-digit',\n          meridiem: 'lowercase'\n        }; // '8:30:45 PM'\n      }\n\n      break;\n    case 'millisecond':\n      format0 = {\n        hour: 'numeric',\n        minute: '2-digit',\n        second: '2-digit',\n        meridiem: 'lowercase'\n      }; // '8:30:45 PM'\n      format1 = function (params) {\n        return '.' + padStart(params.millisecond, 3);\n      };\n      break;\n  }\n  return [].concat(format0 || [], format1 || [], format2 || []);\n}\n// Compute the number of the give units in the \"current\" range.\n// Won't go more precise than days.\n// Will return `0` if there's not a clean whole interval.\nfunction currentRangeAs(unit, dateProfile, dateEnv) {\n  var range = dateProfile.currentRange;\n  var res = null;\n  if (unit === 'years') {\n    res = dateEnv.diffWholeYears(range.start, range.end);\n  } else if (unit === 'months') {\n    res = dateEnv.diffWholeMonths(range.start, range.end);\n  } else if (unit === 'weeks') {\n    res = dateEnv.diffWholeMonths(range.start, range.end);\n  } else if (unit === 'days') {\n    res = diffWholeDays(range.start, range.end);\n  }\n  return res || 0;\n}\nfunction buildIsWeekStarts(tDateProfile, dateEnv) {\n  var slotDates = tDateProfile.slotDates,\n    emphasizeWeeks = tDateProfile.emphasizeWeeks;\n  var prevWeekNumber = null;\n  var isWeekStarts = [];\n  for (var _i = 0, slotDates_1 = slotDates; _i < slotDates_1.length; _i++) {\n    var slotDate = slotDates_1[_i];\n    var weekNumber = dateEnv.computeWeekNumber(slotDate);\n    var isWeekStart = emphasizeWeeks && prevWeekNumber !== null && prevWeekNumber !== weekNumber;\n    prevWeekNumber = weekNumber;\n    isWeekStarts.push(isWeekStart);\n  }\n  return isWeekStarts;\n}\nfunction buildCellRows(tDateProfile, dateEnv, allOptions) {\n  var slotDates = tDateProfile.slotDates;\n  var formats = tDateProfile.headerFormats;\n  var cellRows = formats.map(function (format) {\n    return [];\n  }); // indexed by row,col\n  // specifically for navclicks\n  var rowUnits = formats.map(function (format) {\n    return format.getLargestUnit ? format.getLargestUnit() : null;\n  });\n  // builds cellRows and slotCells\n  for (var i = 0; i < slotDates.length; i++) {\n    var date = slotDates[i];\n    var isWeekStart = tDateProfile.isWeekStarts[i];\n    for (var row = 0; row < formats.length; row++) {\n      var format = formats[row];\n      var rowCells = cellRows[row];\n      var leadingCell = rowCells[rowCells.length - 1];\n      var isSuperRow = formats.length > 1 && row < formats.length - 1; // more than one row and not the last\n      var newCell = null;\n      if (isSuperRow) {\n        var text = dateEnv.format(date, format);\n        if (!leadingCell || leadingCell.text !== text) {\n          newCell = buildCellObject(date, text, rowUnits[row], allOptions, dateEnv);\n        } else {\n          leadingCell.colspan += 1;\n        }\n      } else {\n        if (!leadingCell || isInt(dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.labelInterval))) {\n          var text = dateEnv.format(date, format);\n          newCell = buildCellObject(date, text, rowUnits[row], allOptions, dateEnv);\n        } else {\n          leadingCell.colspan += 1;\n        }\n      }\n      if (newCell) {\n        newCell.weekStart = isWeekStart;\n        rowCells.push(newCell);\n      }\n    }\n  }\n  return cellRows;\n}\nfunction buildCellObject(date, text, rowUnit, allOptions, dateEnv) {\n  var spanHtml = buildGotoAnchorHtml(allOptions, dateEnv, {\n    date: date,\n    type: rowUnit,\n    forceOff: !rowUnit\n  }, {\n    'class': 'fc-cell-text'\n  }, htmlEscape(text));\n  return {\n    text: text,\n    spanHtml: spanHtml,\n    date: date,\n    colspan: 1,\n    isWeekStart: false\n  };\n}\nvar TimelineNowIndicator = /** @class */function () {\n  function TimelineNowIndicator(headParent, bodyParent) {\n    this.headParent = headParent;\n    this.bodyParent = bodyParent;\n  }\n  TimelineNowIndicator.prototype.render = function (coord, isRtl) {\n    var styleProps = isRtl ? {\n      right: -coord\n    } : {\n      left: coord\n    };\n    this.headParent.appendChild(this.arrowEl = createElement('div', {\n      className: 'fc-now-indicator fc-now-indicator-arrow',\n      style: styleProps\n    }));\n    this.bodyParent.appendChild(this.lineEl = createElement('div', {\n      className: 'fc-now-indicator fc-now-indicator-line',\n      style: styleProps\n    }));\n  };\n  TimelineNowIndicator.prototype.unrender = function () {\n    if (this.arrowEl) {\n      removeElement(this.arrowEl);\n    }\n    if (this.lineEl) {\n      removeElement(this.lineEl);\n    }\n  };\n  return TimelineNowIndicator;\n}();\nvar STICKY_PROP_VAL = computeStickyPropVal(); // if null, means not supported at all\nvar IS_MS_EDGE = /Edge/.test(navigator.userAgent);\nvar IS_SAFARI = STICKY_PROP_VAL === '-webkit-sticky'; // good b/c doesn't confuse chrome\nvar STICKY_CLASSNAME = 'fc-sticky';\n/*\nuseful beyond the native position:sticky for these reasons:\n- support in IE11\n- nice centering support\n*/\nvar StickyScroller = /** @class */function () {\n  function StickyScroller(scroller, isRtl, isVertical) {\n    var _this = this;\n    this.usingRelative = null;\n    /*\n    known bug: called twice on init. problem when mixing with ScrollJoiner\n    */\n    this.updateSize = function () {\n      var els = Array.prototype.slice.call(_this.scroller.canvas.el.querySelectorAll('.' + STICKY_CLASSNAME));\n      var elGeoms = _this.queryElGeoms(els);\n      var viewportWidth = _this.scroller.el.clientWidth;\n      if (_this.usingRelative) {\n        var elDestinations = _this.computeElDestinations(elGeoms, viewportWidth); // read before prepPositioning\n        assignRelativePositions(els, elGeoms, elDestinations);\n      } else {\n        assignStickyPositions(els, elGeoms, viewportWidth);\n      }\n    };\n    this.scroller = scroller;\n    this.usingRelative = !STICKY_PROP_VAL ||\n    // IE11\n    IS_MS_EDGE && isRtl ||\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/18883305/\n    (IS_MS_EDGE || IS_SAFARI) && isVertical; // because doesn't work with rowspan in tables, our only vertial use\n    if (this.usingRelative) {\n      scroller.on('scrollEnd', this.updateSize);\n    }\n  }\n  StickyScroller.prototype.destroy = function () {\n    this.scroller.off('scrollEnd', this.updateSize);\n  };\n  StickyScroller.prototype.queryElGeoms = function (els) {\n    var canvasOrigin = this.scroller.canvas.el.getBoundingClientRect();\n    var elGeoms = [];\n    for (var _i = 0, els_1 = els; _i < els_1.length; _i++) {\n      var el = els_1[_i];\n      var parentBound = translateRect(el.parentNode.getBoundingClientRect(), -canvasOrigin.left, -canvasOrigin.top);\n      var elRect = el.getBoundingClientRect();\n      var computedStyles = window.getComputedStyle(el);\n      var computedTextAlign = window.getComputedStyle(el.parentNode).textAlign; // ask the parent\n      var intendedTextAlign = computedTextAlign;\n      var naturalBound = null;\n      if (computedStyles.position !== 'sticky') {\n        naturalBound = translateRect(elRect, -canvasOrigin.left - (parseFloat(computedStyles.left) || 0),\n        // could be 'auto'\n        -canvasOrigin.top - (parseFloat(computedStyles.top) || 0));\n      }\n      if (el.hasAttribute('data-sticky-center')) {\n        intendedTextAlign = 'center';\n      }\n      elGeoms.push({\n        parentBound: parentBound,\n        naturalBound: naturalBound,\n        elWidth: elRect.width,\n        elHeight: elRect.height,\n        computedTextAlign: computedTextAlign,\n        intendedTextAlign: intendedTextAlign\n      });\n    }\n    return elGeoms;\n  };\n  StickyScroller.prototype.computeElDestinations = function (elGeoms, viewportWidth) {\n    var viewportLeft = this.scroller.getScrollFromLeft();\n    var viewportTop = this.scroller.getScrollTop();\n    var viewportRight = viewportLeft + viewportWidth;\n    return elGeoms.map(function (elGeom) {\n      var elWidth = elGeom.elWidth,\n        elHeight = elGeom.elHeight,\n        parentBound = elGeom.parentBound,\n        naturalBound = elGeom.naturalBound;\n      var destLeft; // relative to canvas topleft\n      var destTop; // \"\n      switch (elGeom.intendedTextAlign) {\n        case 'left':\n          destLeft = viewportLeft;\n          break;\n        case 'right':\n          destLeft = viewportRight - elWidth;\n          break;\n        case 'center':\n          destLeft = (viewportLeft + viewportRight) / 2 - elWidth / 2;\n          break;\n      }\n      destLeft = Math.min(destLeft, parentBound.right - elWidth);\n      destLeft = Math.max(destLeft, parentBound.left);\n      destTop = viewportTop;\n      destTop = Math.min(destTop, parentBound.bottom - elHeight);\n      destTop = Math.max(destTop, naturalBound.top); // better to use natural top for upper bound\n      return {\n        left: destLeft,\n        top: destTop\n      };\n    });\n  };\n  return StickyScroller;\n}();\nfunction assignRelativePositions(els, elGeoms, elDestinations) {\n  els.forEach(function (el, i) {\n    var naturalBound = elGeoms[i].naturalBound;\n    applyStyle(el, {\n      position: 'relative',\n      left: elDestinations[i].left - naturalBound.left,\n      top: elDestinations[i].top - naturalBound.top\n    });\n  });\n}\nfunction assignStickyPositions(els, elGeoms, viewportWidth) {\n  els.forEach(function (el, i) {\n    var stickyLeft = 0;\n    if (elGeoms[i].intendedTextAlign === 'center') {\n      stickyLeft = (viewportWidth - elGeoms[i].elWidth) / 2;\n      // needs to be forced to left?\n      if (elGeoms[i].computedTextAlign === 'center') {\n        el.setAttribute('data-sticky-center', '') // remember for next queryElGeoms\n        ;\n\n        el.parentNode.style.textAlign = 'left';\n      }\n    }\n    applyStyle(el, {\n      position: STICKY_PROP_VAL,\n      left: stickyLeft,\n      right: 0,\n      top: 0\n    });\n  });\n}\nfunction computeStickyPropVal() {\n  var el = htmlToElement('<div style=\"position:-webkit-sticky;position:sticky\"></div>');\n  var val = el.style.position;\n  if (val.indexOf('sticky') !== -1) {\n    return val;\n  } else {\n    return null;\n  }\n}\nvar TimeAxis = /** @class */function (_super) {\n  __extends(TimeAxis, _super);\n  function TimeAxis(headerContainerEl, bodyContainerEl) {\n    var _this = _super.call(this) || this;\n    _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n    _this.layout = new HeaderBodyLayout(headerContainerEl, bodyContainerEl, 'auto');\n    return _this;\n  }\n  TimeAxis.prototype.render = function (props, context) {\n    var tDateProfile = this.tDateProfile = buildTimelineDateProfile(props.dateProfile, context.dateEnv, context.options, props.dateProfileGenerator); // TODO: cache\n    this.renderSkeleton(context);\n    this.header.receiveProps({\n      dateProfile: props.dateProfile,\n      tDateProfile: tDateProfile\n    }, context);\n    this.slats.receiveProps({\n      dateProfile: props.dateProfile,\n      tDateProfile: tDateProfile\n    }, context);\n  };\n  TimeAxis.prototype.destroy = function () {\n    this.renderSkeleton.unrender();\n    this.layout.destroy();\n    _super.prototype.destroy.call(this);\n  };\n  TimeAxis.prototype._renderSkeleton = function (context) {\n    var layout = this.layout;\n    var headerEnhancedScroller = layout.headerScroller.enhancedScroll;\n    var bodyEnhancedScroller = layout.bodyScroller.enhancedScroll;\n    // needs to go after layout, which has ScrollJoiner\n    this.headStickyScroller = new StickyScroller(headerEnhancedScroller, context.isRtl, false); // isVertical=false\n    this.bodyStickyScroller = new StickyScroller(bodyEnhancedScroller, context.isRtl, false); // isVertical=false\n    this.header = new TimelineHeader(headerEnhancedScroller.canvas.contentEl);\n    this.slats = new TimelineSlats(bodyEnhancedScroller.canvas.bgEl);\n    this.nowIndicator = new TimelineNowIndicator(headerEnhancedScroller.canvas.el, bodyEnhancedScroller.canvas.el);\n  };\n  TimeAxis.prototype._unrenderSkeleton = function () {\n    this.header.destroy();\n    this.slats.destroy();\n    this.nowIndicator.unrender();\n    this.headStickyScroller.destroy();\n    this.bodyStickyScroller.destroy();\n  };\n  // Now Indicator\n  // ------------------------------------------------------------------------------------------\n  TimeAxis.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n    var context = this.context;\n    // yuck\n    var tDateProfile = this.tDateProfile = buildTimelineDateProfile(dateProfile, context.dateEnv, context.options, dateProfileGenerator); // TODO: cache\n    if (tDateProfile.isTimeScale) {\n      return greatestDurationDenominator(tDateProfile.slotDuration).unit;\n    }\n  };\n  // will only execute if isTimeScale\n  TimeAxis.prototype.renderNowIndicator = function (date) {\n    if (rangeContainsMarker(this.tDateProfile.normalizedRange, date)) {\n      this.nowIndicator.render(this.dateToCoord(date), this.context.isRtl);\n    }\n  };\n  // will only execute if isTimeScale\n  TimeAxis.prototype.unrenderNowIndicator = function () {\n    this.nowIndicator.unrender();\n  };\n  // Sizing\n  // ------------------------------------------------------------------------------------------\n  TimeAxis.prototype.updateSize = function (isResize, totalHeight, isAuto) {\n    this.applySlotWidth(this.computeSlotWidth());\n    // adjusts gutters. do after slot widths set\n    this.layout.setHeight(totalHeight, isAuto);\n    // pretty much just queries coords. do last\n    this.slats.updateSize();\n  };\n  TimeAxis.prototype.updateStickyScrollers = function () {\n    this.headStickyScroller.updateSize();\n    this.bodyStickyScroller.updateSize();\n  };\n  TimeAxis.prototype.computeSlotWidth = function () {\n    var slotWidth = this.context.options.slotWidth || '';\n    if (slotWidth === '') {\n      slotWidth = this.computeDefaultSlotWidth(this.tDateProfile);\n    }\n    return slotWidth;\n  };\n  TimeAxis.prototype.computeDefaultSlotWidth = function (tDateProfile) {\n    var maxInnerWidth = 0; // TODO: harness core's `matchCellWidths` for this\n    this.header.innerEls.forEach(function (innerEl, i) {\n      maxInnerWidth = Math.max(maxInnerWidth, innerEl.getBoundingClientRect().width);\n    });\n    var headingCellWidth = Math.ceil(maxInnerWidth) + 1; // assume no padding, and one pixel border\n    // in TimelineView.defaults we ensured that labelInterval is an interval of slotDuration\n    // TODO: rename labelDuration?\n    var slotsPerLabel = wholeDivideDurations(tDateProfile.labelInterval, tDateProfile.slotDuration);\n    var slotWidth = Math.ceil(headingCellWidth / slotsPerLabel);\n    var minWidth = window.getComputedStyle(this.header.slatColEls[0]).minWidth;\n    if (minWidth) {\n      minWidth = parseInt(minWidth, 10);\n      if (minWidth) {\n        slotWidth = Math.max(slotWidth, minWidth);\n      }\n    }\n    return slotWidth;\n  };\n  TimeAxis.prototype.applySlotWidth = function (slotWidth) {\n    var _a = this,\n      layout = _a.layout,\n      tDateProfile = _a.tDateProfile;\n    var containerWidth = '';\n    var containerMinWidth = '';\n    var nonLastSlotWidth = '';\n    if (slotWidth !== '') {\n      slotWidth = Math.round(slotWidth);\n      containerWidth = slotWidth * tDateProfile.slotDates.length;\n      containerMinWidth = '';\n      nonLastSlotWidth = slotWidth;\n      var availableWidth = layout.bodyScroller.enhancedScroll.getClientWidth();\n      if (availableWidth > containerWidth) {\n        containerMinWidth = availableWidth;\n        containerWidth = '';\n        nonLastSlotWidth = Math.floor(availableWidth / tDateProfile.slotDates.length);\n      }\n    }\n    layout.headerScroller.enhancedScroll.canvas.setWidth(containerWidth);\n    layout.headerScroller.enhancedScroll.canvas.setMinWidth(containerMinWidth);\n    layout.bodyScroller.enhancedScroll.canvas.setWidth(containerWidth);\n    layout.bodyScroller.enhancedScroll.canvas.setMinWidth(containerMinWidth);\n    if (nonLastSlotWidth !== '') {\n      this.header.slatColEls.slice(0, -1).concat(this.slats.slatColEls.slice(0, -1)).forEach(function (el) {\n        el.style.width = nonLastSlotWidth + 'px';\n        el.style.minWidth = '0'; // prevent the browser from using the actual min-width (issue #6338)\n      });\n    }\n  };\n  // returned value is between 0 and the number of snaps\n  TimeAxis.prototype.computeDateSnapCoverage = function (date) {\n    var tDateProfile = this.tDateProfile;\n    var dateEnv = this.context.dateEnv;\n    var snapDiff = dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.snapDuration);\n    if (snapDiff < 0) {\n      return 0;\n    } else if (snapDiff >= tDateProfile.snapDiffToIndex.length) {\n      return tDateProfile.snapCnt;\n    } else {\n      var snapDiffInt = Math.floor(snapDiff);\n      var snapCoverage = tDateProfile.snapDiffToIndex[snapDiffInt];\n      if (isInt(snapCoverage)) {\n        // not an in-between value\n        snapCoverage += snapDiff - snapDiffInt; // add the remainder\n      } else {\n        // a fractional value, meaning the date is not visible\n        // always round up in this case. works for start AND end dates in a range.\n        snapCoverage = Math.ceil(snapCoverage);\n      }\n      return snapCoverage;\n    }\n  };\n  // for LTR, results range from 0 to width of area\n  // for RTL, results range from negative width of area to 0\n  TimeAxis.prototype.dateToCoord = function (date) {\n    var tDateProfile = this.tDateProfile;\n    var snapCoverage = this.computeDateSnapCoverage(date);\n    var slotCoverage = snapCoverage / tDateProfile.snapsPerSlot;\n    var slotIndex = Math.floor(slotCoverage);\n    slotIndex = Math.min(slotIndex, tDateProfile.slotCnt - 1);\n    var partial = slotCoverage - slotIndex;\n    var _a = this.slats,\n      innerCoordCache = _a.innerCoordCache,\n      outerCoordCache = _a.outerCoordCache;\n    if (this.context.isRtl) {\n      return outerCoordCache.rights[slotIndex] - innerCoordCache.getWidth(slotIndex) * partial - outerCoordCache.originClientRect.width;\n    } else {\n      return outerCoordCache.lefts[slotIndex] + innerCoordCache.getWidth(slotIndex) * partial;\n    }\n  };\n  TimeAxis.prototype.rangeToCoords = function (range) {\n    if (this.context.isRtl) {\n      return {\n        right: this.dateToCoord(range.start),\n        left: this.dateToCoord(range.end)\n      };\n    } else {\n      return {\n        left: this.dateToCoord(range.start),\n        right: this.dateToCoord(range.end)\n      };\n    }\n  };\n  // Scrolling\n  // ------------------------------------------------------------------------------------------\n  TimeAxis.prototype.computeDateScroll = function (duration) {\n    var _a = this.context,\n      dateEnv = _a.dateEnv,\n      isRtl = _a.isRtl;\n    var dateProfile = this.props.dateProfile;\n    var left = 0;\n    if (dateProfile) {\n      left = this.dateToCoord(dateEnv.add(startOfDay(dateProfile.activeRange.start),\n      // startOfDay needed?\n      duration));\n      // hack to overcome the left borders of non-first slat\n      if (!isRtl && left) {\n        left += 1;\n      }\n    }\n    return {\n      left: left\n    };\n  };\n  TimeAxis.prototype.queryDateScroll = function () {\n    var enhancedScroll = this.layout.bodyScroller.enhancedScroll;\n    return {\n      left: enhancedScroll.getScrollLeft()\n    };\n  };\n  TimeAxis.prototype.applyDateScroll = function (scroll) {\n    // TODO: lame we have to update both. use the scrolljoiner instead maybe\n    this.layout.bodyScroller.enhancedScroll.setScrollLeft(scroll.left || 0);\n    this.layout.headerScroller.enhancedScroll.setScrollLeft(scroll.left || 0);\n  };\n  return TimeAxis;\n}(Component);\nvar TimelineLaneEventRenderer = /** @class */function (_super) {\n  __extends(TimelineLaneEventRenderer, _super);\n  function TimelineLaneEventRenderer(masterContainerEl, timeAxis) {\n    var _this = _super.call(this) || this;\n    _this.masterContainerEl = masterContainerEl;\n    _this.timeAxis = timeAxis;\n    return _this;\n  }\n  TimelineLaneEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n    var context = this.context;\n    var eventRange = seg.eventRange;\n    var eventDef = eventRange.def;\n    var eventUi = eventRange.ui;\n    var isDraggable = computeEventDraggable(context, eventDef, eventUi);\n    var isResizableFromStart = seg.isStart && computeEventStartResizable(context, eventDef, eventUi);\n    var isResizableFromEnd = seg.isEnd && computeEventEndResizable(context, eventDef, eventUi);\n    var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n    classes.unshift('fc-timeline-event', 'fc-h-event');\n    var timeText = this.getTimeText(eventRange);\n    return '<a class=\"' + classes.join(' ') + '\" style=\"' + cssToStr(this.getSkinCss(eventUi)) + '\"' + (eventDef.url ? ' href=\"' + htmlEscape(eventDef.url) + '\"' : '') + '>' + (timeText ? '<span class=\"fc-time-wrap\">' + '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>' + '</span>' : '') + '<span class=\"fc-title-wrap\">' + '<span class=\"fc-title fc-sticky\">' + (eventDef.title ? htmlEscape(eventDef.title) : '&nbsp;') + '</span>' + '</span>' + (isResizableFromStart ? '<div class=\"fc-resizer fc-start-resizer\"></div>' : '') + (isResizableFromEnd ? '<div class=\"fc-resizer fc-end-resizer\"></div>' : '') + '</a>';\n  };\n  TimelineLaneEventRenderer.prototype.computeDisplayEventTime = function () {\n    return !this.timeAxis.tDateProfile.isTimeScale; // because times should be obvious via axis\n  };\n\n  TimelineLaneEventRenderer.prototype.computeDisplayEventEnd = function () {\n    return false;\n  };\n  // Computes a default event time formatting string if `timeFormat` is not explicitly defined\n  TimelineLaneEventRenderer.prototype.computeEventTimeFormat = function () {\n    return {\n      hour: 'numeric',\n      minute: '2-digit',\n      omitZeroMinute: true,\n      meridiem: 'narrow'\n    };\n  };\n  TimelineLaneEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n    if (!this.el && this.masterContainerEl) {\n      this.el = createElement('div', {\n        className: 'fc-event-container'\n      });\n      if (mirrorInfo) {\n        this.el.classList.add('fc-mirror-container');\n      }\n      this.masterContainerEl.appendChild(this.el);\n    }\n    if (this.el) {\n      for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        this.el.appendChild(seg.el);\n      }\n    }\n  };\n  TimelineLaneEventRenderer.prototype.detachSegs = function (segs) {\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n      var seg = segs_2[_i];\n      removeElement(seg.el);\n    }\n  };\n  // computes AND assigns (assigns the left/right at least). bad\n  TimelineLaneEventRenderer.prototype.computeSegSizes = function (segs) {\n    var timeAxis = this.timeAxis;\n    for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n      var seg = segs_3[_i];\n      var coords = timeAxis.rangeToCoords(seg); // works because Seg has start/end\n      applyStyle(seg.el, {\n        left: seg.left = coords.left,\n        right: -(seg.right = coords.right)\n      });\n    }\n  };\n  TimelineLaneEventRenderer.prototype.assignSegSizes = function (segs) {\n    if (!this.el) {\n      return;\n    }\n    // compute seg verticals\n    for (var _i = 0, segs_4 = segs; _i < segs_4.length; _i++) {\n      var seg = segs_4[_i];\n      seg.height = computeHeightAndMargins(seg.el);\n    }\n    this.buildSegLevels(segs); // populates above/below props for computeOffsetForSegs\n    var totalHeight = computeOffsetForSegs(segs); // also assigns seg.top\n    applyStyleProp(this.el, 'height', totalHeight);\n    // assign seg verticals\n    for (var _a = 0, segs_5 = segs; _a < segs_5.length; _a++) {\n      var seg = segs_5[_a];\n      applyStyleProp(seg.el, 'top', seg.top);\n    }\n  };\n  TimelineLaneEventRenderer.prototype.buildSegLevels = function (segs) {\n    var segLevels = [];\n    segs = this.sortEventSegs(segs);\n    for (var _i = 0, segs_6 = segs; _i < segs_6.length; _i++) {\n      var unplacedSeg = segs_6[_i];\n      unplacedSeg.above = [];\n      // determine the first level with no collisions\n      var level = 0; // level index\n      while (level < segLevels.length) {\n        var isLevelCollision = false;\n        // determine collisions\n        for (var _a = 0, _b = segLevels[level]; _a < _b.length; _a++) {\n          var placedSeg = _b[_a];\n          if (timeRowSegsCollide(unplacedSeg, placedSeg)) {\n            unplacedSeg.above.push(placedSeg);\n            isLevelCollision = true;\n          }\n        }\n        if (isLevelCollision) {\n          level += 1;\n        } else {\n          break;\n        }\n      }\n      // insert into the first non-colliding level. create if necessary\n      (segLevels[level] || (segLevels[level] = [])).push(unplacedSeg);\n      // record possible colliding segments below (TODO: automated test for this)\n      level += 1;\n      while (level < segLevels.length) {\n        for (var _c = 0, _d = segLevels[level]; _c < _d.length; _c++) {\n          var belowSeg = _d[_c];\n          if (timeRowSegsCollide(unplacedSeg, belowSeg)) {\n            belowSeg.above.push(unplacedSeg);\n          }\n        }\n        level += 1;\n      }\n    }\n    return segLevels;\n  };\n  return TimelineLaneEventRenderer;\n}(FgEventRenderer);\nfunction computeOffsetForSegs(segs) {\n  var max = 0;\n  for (var _i = 0, segs_7 = segs; _i < segs_7.length; _i++) {\n    var seg = segs_7[_i];\n    max = Math.max(max, computeOffsetForSeg(seg));\n  }\n  return max;\n}\nfunction computeOffsetForSeg(seg) {\n  if (seg.top == null) {\n    seg.top = computeOffsetForSegs(seg.above);\n  }\n  return seg.top + seg.height;\n}\nfunction timeRowSegsCollide(seg0, seg1) {\n  return seg0.left < seg1.right && seg0.right > seg1.left;\n}\nvar TimelineLaneFillRenderer = /** @class */function (_super) {\n  __extends(TimelineLaneFillRenderer, _super);\n  function TimelineLaneFillRenderer(masterContainerEl, timeAxis) {\n    var _this = _super.call(this) || this;\n    _this.masterContainerEl = masterContainerEl;\n    _this.timeAxis = timeAxis;\n    return _this;\n  }\n  TimelineLaneFillRenderer.prototype.attachSegs = function (type, segs) {\n    if (segs.length) {\n      var className = void 0;\n      if (type === 'businessHours') {\n        className = 'bgevent';\n      } else {\n        className = type.toLowerCase();\n      }\n      // making a new container each time is OKAY\n      // all types of segs (background or business hours or whatever) are rendered in one pass\n      var containerEl = createElement('div', {\n        className: 'fc-' + className + '-container'\n      });\n      this.masterContainerEl.appendChild(containerEl);\n      for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        containerEl.appendChild(seg.el);\n      }\n      return [containerEl]; // return value\n    }\n  };\n\n  TimelineLaneFillRenderer.prototype.computeSegSizes = function (segs) {\n    var timeAxis = this.timeAxis;\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n      var seg = segs_2[_i];\n      var coords = timeAxis.rangeToCoords(seg);\n      seg.left = coords.left;\n      seg.right = coords.right;\n    }\n  };\n  TimelineLaneFillRenderer.prototype.assignSegSizes = function (segs) {\n    for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n      var seg = segs_3[_i];\n      applyStyle(seg.el, {\n        left: seg.left,\n        right: -seg.right\n      });\n    }\n  };\n  return TimelineLaneFillRenderer;\n}(FillRenderer);\nvar TimelineLane = /** @class */function (_super) {\n  __extends(TimelineLane, _super);\n  function TimelineLane(fgContainerEl, bgContainerEl, timeAxis) {\n    var _this = _super.call(this, bgContainerEl) || this;\n    _this.slicer = new TimelineLaneSlicer();\n    _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag);\n    _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize);\n    _this.fgContainerEl = fgContainerEl;\n    _this.timeAxis = timeAxis;\n    var fillRenderer = _this.fillRenderer = new TimelineLaneFillRenderer(bgContainerEl, timeAxis);\n    var eventRenderer = _this.eventRenderer = new TimelineLaneEventRenderer(fgContainerEl, timeAxis);\n    _this.mirrorRenderer = new TimelineLaneEventRenderer(fgContainerEl, timeAxis);\n    _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'));\n    _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'));\n    _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'));\n    _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer));\n    _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n    return _this;\n  }\n  TimelineLane.prototype.render = function (props, context) {\n    var timeAxis = this.timeAxis;\n    var slicedProps = this.slicer.sliceProps(props, props.dateProfile, timeAxis.tDateProfile.isTimeScale ? null : props.nextDayThreshold, context.calendar, this, timeAxis);\n    this.renderBusinessHours(context, slicedProps.businessHourSegs);\n    this.renderDateSelection(context, slicedProps.dateSelectionSegs);\n    this.renderBgEvents(context, slicedProps.bgEventSegs);\n    this.renderFgEvents(context, slicedProps.fgEventSegs);\n    this.renderEventSelection(slicedProps.eventSelection);\n    this.renderEventDrag(slicedProps.eventDrag);\n    this.renderEventResize(slicedProps.eventResize);\n  };\n  TimelineLane.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.renderBusinessHours.unrender();\n    this.renderDateSelection.unrender();\n    this.renderBgEvents.unrender();\n    this.renderFgEvents.unrender();\n    this.renderEventSelection.unrender();\n    this.renderEventDrag.unrender();\n    this.renderEventResize.unrender();\n  };\n  TimelineLane.prototype._renderEventDrag = function (state) {\n    if (state) {\n      this.eventRenderer.hideByHash(state.affectedInstances);\n      this.mirrorRenderer.renderSegs(this.context, state.segs, {\n        isDragging: true,\n        sourceSeg: state.sourceSeg\n      });\n    }\n  };\n  TimelineLane.prototype._unrenderEventDrag = function (state) {\n    if (state) {\n      this.eventRenderer.showByHash(state.affectedInstances);\n      this.mirrorRenderer.unrender(this.context, state.segs, {\n        isDragging: true,\n        sourceSeg: state.sourceSeg\n      });\n    }\n  };\n  TimelineLane.prototype._renderEventResize = function (state) {\n    if (state) {\n      // HACK. eventRenderer and fillRenderer both use these segs. would compete over seg.el\n      var segsForHighlight = state.segs.map(function (seg) {\n        return __assign({}, seg);\n      });\n      this.eventRenderer.hideByHash(state.affectedInstances);\n      this.fillRenderer.renderSegs('highlight', this.context, segsForHighlight);\n      this.mirrorRenderer.renderSegs(this.context, state.segs, {\n        isDragging: true,\n        sourceSeg: state.sourceSeg\n      });\n    }\n  };\n  TimelineLane.prototype._unrenderEventResize = function (state) {\n    if (state) {\n      this.eventRenderer.showByHash(state.affectedInstances);\n      this.fillRenderer.unrender('highlight', this.context);\n      this.mirrorRenderer.unrender(this.context, state.segs, {\n        isDragging: true,\n        sourceSeg: state.sourceSeg\n      });\n    }\n  };\n  TimelineLane.prototype.updateSize = function (isResize) {\n    var _a = this,\n      fillRenderer = _a.fillRenderer,\n      eventRenderer = _a.eventRenderer,\n      mirrorRenderer = _a.mirrorRenderer;\n    fillRenderer.computeSizes(isResize);\n    eventRenderer.computeSizes(isResize);\n    mirrorRenderer.computeSizes(isResize);\n    fillRenderer.assignSizes(isResize);\n    eventRenderer.assignSizes(isResize);\n    mirrorRenderer.assignSizes(isResize);\n  };\n  return TimelineLane;\n}(DateComponent);\nvar TimelineLaneSlicer = /** @class */function (_super) {\n  __extends(TimelineLaneSlicer, _super);\n  function TimelineLaneSlicer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  TimelineLaneSlicer.prototype.sliceRange = function (origRange, timeAxis) {\n    var tDateProfile = timeAxis.tDateProfile;\n    var _a = timeAxis.props,\n      dateProfile = _a.dateProfile,\n      dateProfileGenerator = _a.dateProfileGenerator;\n    var dateEnv = timeAxis.context.dateEnv;\n    var normalRange = normalizeRange(origRange, tDateProfile, dateEnv);\n    var segs = [];\n    // protect against when the span is entirely in an invalid date region\n    if (timeAxis.computeDateSnapCoverage(normalRange.start) < timeAxis.computeDateSnapCoverage(normalRange.end)) {\n      // intersect the footprint's range with the grid's range\n      var slicedRange = intersectRanges(normalRange, tDateProfile.normalizedRange);\n      if (slicedRange) {\n        segs.push({\n          start: slicedRange.start,\n          end: slicedRange.end,\n          isStart: slicedRange.start.valueOf() === normalRange.start.valueOf() && isValidDate(slicedRange.start, tDateProfile, dateProfile, dateProfileGenerator),\n          isEnd: slicedRange.end.valueOf() === normalRange.end.valueOf() && isValidDate(addMs(slicedRange.end, -1), tDateProfile, dateProfile, dateProfileGenerator)\n        });\n      }\n    }\n    return segs;\n  };\n  return TimelineLaneSlicer;\n}(Slicer);\nvar TimelineView = /** @class */function (_super) {\n  __extends(TimelineView, _super);\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n    _this.startInteractive = memoizeRendering(_this._startInteractive, _this._stopInteractive);\n    return _this;\n  }\n  TimelineView.prototype._startInteractive = function (timeAxisEl) {\n    this.context.calendar.registerInteractiveComponent(this, {\n      el: timeAxisEl\n    });\n  };\n  TimelineView.prototype._stopInteractive = function () {\n    this.context.calendar.unregisterInteractiveComponent(this);\n  };\n  TimelineView.prototype.render = function (props, context) {\n    _super.prototype.render.call(this, props, context); // flags for updateSize, addScroll. and _renderSkeleton/_unrenderSkeleton\n    this.renderSkeleton(this.context);\n    this.timeAxis.receiveProps({\n      dateProfileGenerator: props.dateProfileGenerator,\n      dateProfile: props.dateProfile\n    }, context);\n    this.startInteractive(this.timeAxis.slats.el);\n    this.lane.receiveProps(__assign({}, props, {\n      nextDayThreshold: this.context.nextDayThreshold\n    }), context);\n    this.startNowIndicator(props.dateProfile, props.dateProfileGenerator);\n  };\n  TimelineView.prototype.destroy = function () {\n    this.startInteractive.unrender(); // \"unrender\" a weird name\n    this.renderSkeleton.unrender();\n    _super.prototype.destroy.call(this);\n  };\n  TimelineView.prototype._renderSkeleton = function (context) {\n    this.el.classList.add('fc-timeline');\n    if (context.options.eventOverlap === false) {\n      this.el.classList.add('fc-no-overlap');\n    }\n    this.el.innerHTML = this.renderSkeletonHtml();\n    this.timeAxis = new TimeAxis(this.el.querySelector('thead .fc-time-area'), this.el.querySelector('tbody .fc-time-area'));\n    this.lane = new TimelineLane(this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.contentEl, this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.bgEl, this.timeAxis);\n  };\n  TimelineView.prototype._unrenderSkeleton = function () {\n    this.el.classList.remove('fc-timeline');\n    this.el.classList.remove('fc-no-overlap');\n    this.timeAxis.destroy();\n    this.lane.destroy();\n  };\n  TimelineView.prototype.renderSkeletonHtml = function () {\n    var theme = this.context.theme;\n    return \"<table class=\\\"\" + theme.getClass('tableGrid') + \"\\\"> <thead class=\\\"fc-head\\\"> <tr> <td class=\\\"fc-time-area \" + theme.getClass('widgetHeader') + \"\\\"></td> </tr> </thead> <tbody class=\\\"fc-body\\\"> <tr> <td class=\\\"fc-time-area \" + theme.getClass('widgetContent') + \"\\\"></td> </tr> </tbody> </table>\";\n  };\n  TimelineView.prototype.updateSize = function (isResize, totalHeight, isAuto) {\n    this.timeAxis.updateSize(isResize, totalHeight, isAuto);\n    this.lane.updateSize(isResize);\n  };\n  // Now Indicator\n  // ------------------------------------------------------------------------------------------\n  TimelineView.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n    return this.timeAxis.getNowIndicatorUnit(dateProfile, dateProfileGenerator);\n  };\n  TimelineView.prototype.renderNowIndicator = function (date) {\n    this.timeAxis.renderNowIndicator(date);\n  };\n  TimelineView.prototype.unrenderNowIndicator = function () {\n    this.timeAxis.unrenderNowIndicator();\n  };\n  // Scroll System\n  // ------------------------------------------------------------------------------------------\n  TimelineView.prototype.computeDateScroll = function (duration) {\n    return this.timeAxis.computeDateScroll(duration);\n  };\n  TimelineView.prototype.applyScroll = function (scroll, isResize) {\n    _super.prototype.applyScroll.call(this, scroll, isResize); // will call applyDateScroll\n    var calendar = this.context.calendar;\n    // avoid updating stickyscroll too often\n    // TODO: repeat code as ResourceTimelineView::updateSize\n    if (isResize || calendar.isViewUpdated || calendar.isDatesUpdated || calendar.isEventsUpdated) {\n      this.timeAxis.updateStickyScrollers();\n    }\n  };\n  TimelineView.prototype.applyDateScroll = function (scroll) {\n    this.timeAxis.applyDateScroll(scroll);\n  };\n  TimelineView.prototype.queryScroll = function () {\n    var enhancedScroll = this.timeAxis.layout.bodyScroller.enhancedScroll;\n    return {\n      top: enhancedScroll.getScrollTop(),\n      left: enhancedScroll.getScrollLeft()\n    };\n  };\n  // Hit System\n  // ------------------------------------------------------------------------------------------\n  TimelineView.prototype.buildPositionCaches = function () {\n    this.timeAxis.slats.updateSize();\n  };\n  TimelineView.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n    var slatHit = this.timeAxis.slats.positionToHit(positionLeft);\n    if (slatHit) {\n      return {\n        component: this,\n        dateSpan: slatHit.dateSpan,\n        rect: {\n          left: slatHit.left,\n          right: slatHit.right,\n          top: 0,\n          bottom: elHeight\n        },\n        dayEl: slatHit.dayEl,\n        layer: 0\n      };\n    }\n  };\n  return TimelineView;\n}(View);\nvar main = createPlugin({\n  defaultView: 'timelineDay',\n  views: {\n    timeline: {\n      class: TimelineView,\n      eventResizableFromStart: true // how is this consumed for TimelineView tho?\n    },\n\n    timelineDay: {\n      type: 'timeline',\n      duration: {\n        days: 1\n      }\n    },\n    timelineWeek: {\n      type: 'timeline',\n      duration: {\n        weeks: 1\n      }\n    },\n    timelineMonth: {\n      type: 'timeline',\n      duration: {\n        months: 1\n      }\n    },\n    timelineYear: {\n      type: 'timeline',\n      duration: {\n        years: 1\n      }\n    }\n  }\n});\nexport default main;\nexport { HeaderBodyLayout, ScrollJoiner, StickyScroller, TimeAxis, TimelineLane, TimelineView };","map":{"version":3,"names":["htmlToElement","forceClassName","applyStyle","debounce","preventDefault","ScrollComponent","EmitterMixin","removeElement","createElement","computeEdges","asRoughMs","isSingleDay","getDayClasses","findElements","Component","PositionCache","findChildren","isInt","multiplyDuration","config","createFormatter","greatestDurationDenominator","createDuration","wholeDivideDurations","addDays","startOfDay","computeVisibleDayRange","asRoughMinutes","padStart","asRoughSeconds","diffWholeDays","buildGotoAnchorHtml","htmlEscape","translateRect","memoizeRendering","rangeContainsMarker","computeEventDraggable","computeEventStartResizable","computeEventEndResizable","cssToStr","computeHeightAndMargins","applyStyleProp","FgEventRenderer","FillRenderer","DateComponent","intersectRanges","addMs","Slicer","View","createPlugin","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","ScrollerCanvas","gutters","el","contentEl","querySelector","bgEl","setGutters","updateSize","setWidth","width","setMinWidth","minWidth","clearWidth","_a","left","right","top","bottom","paddingLeft","paddingRight","paddingTop","paddingBottom","EnhancedScroller","_super","overflowX","overflowY","_this","reportScroll","isScrolling","reportScrollStart","trigger","isMoving","requestMovingEnd","isTouching","reportTouchStart","reportTouchEnd","isTouchScrollEnabled","unbindPreventTouchScroll","reportScrollEnd","reportMovingEnd","canvas","appendChild","applyOverflow","bindHandlers","destroy","unbindHandlers","disableTouchScroll","bindPreventTouchScroll","enableTouchScroll","preventTouchScrollHandler","addEventListener","removeEventListener","passive","getScrollLeft","direction","window","getComputedStyle","val","scrollLeft","getRtlScrollSystem","clientWidth","scrollWidth","setScrollLeft","getScrollFromLeft","mixInto","_rtlScrollSystem","detectRtlScrollSystem","document","body","system","ClippedScroller","parentEl","isHScrollbarsClipped","isVScrollbarsClipped","enhancedScroll","className","scrollEl","edges","cssProps","marginLeft","marginRight","marginTop","marginBottom","scrollbarLeft","scrollbarRight","scrollbarBottom","classList","add","remove","setHeight","height","getScrollbarWidths","widths","ScrollJoiner","axis","scrollers","_i","scroller","initScroller","onScroll","assignMasterScroller","split","forEach","evName","on","masterScroller","otherScroller","setScrollTop","getScrollTop","unassignMasterScroller","update","allWidths","map","maxLeft","maxRight","maxTop","maxBottom","allWidths_1","Math","max","HeaderBodyLayout","headerContainerEl","bodyContainerEl","verticalScroll","headerScroller","bodyScroller","scrollJoiner","totalHeight","isAuto","bodyHeight","queryHeadHeight","getBoundingClientRect","TimelineHeader","firstContext","context","tableEl","theme","getClass","render","props","renderDates","tDateProfile","dateEnv","cellRows","lastRow","isChrono","labelInterval","slotDuration","oneDay","html","slotCnt","cellRows_1","rowCells","isLast","_b","rowCells_1","cell","headerCellClassNames","isWeekStart","push","concat","date","dateProfile","join","formatIso","omitTime","isTimeScale","omitTimeZoneOffset","colspan","spanHtml","innerHTML","slatColEls","innerEls","querySelectorAll","innerEl","TimelineSlats","calendar","view","slotDates","isWeekStarts","slatCellHtml","slatEls","publiclyTrigger","toDate","outerCoordCache","innerCoordCache","isEm","classes","countDurationsBetween","normalizedRange","start","unshift","build","positionToHit","leftPosition","isRtl","slatIndex","leftToIndex","slatWidth","getWidth","partial","rights","lefts","localSnapIndex","floor","snapsPerSlot","snapDuration","end","dateSpan","range","allDay","dayEl","MIN_AUTO_LABELS","MAX_AUTO_SLOTS_PER_LABEL","MAX_AUTO_CELLS","MAX_TIMELINE_SLOTS","STOCK_SUB_DURATIONS","years","months","days","hours","minutes","seconds","milliseconds","buildTimelineDateProfile","allOptions","dateProfileGenerator","queryDurationOption","validateLabelAndSlot","ensureLabelInterval","ensureSlotDuration","input","slotLabelFormat","rawFormats","isArray","computeHeaderFormats","headerFormats","rawFormat","Boolean","largeUnit","slotUnit","unit","test","emphasizeWeeks","currentRangeAs","businessHours","rawSnapDuration","timeWindowMs","maxTime","minTime","normalizedStart","normalizeDate","renderRange","normalizedEnd","isValidDate","snapIndex","snapDiff","snapDiffToIndex","snapIndexToDiff","snapCnt","buildIsWeekStarts","buildCellRows","normalDate","startOf","normalizeRange","dayRange","valueOf","isHiddenDay","day","timeMs","ms","name","currentRange","labelCnt","console","warn","slotsPerLabel","STOCK_SUB_DURATIONS_1","tryLabelInterval","STOCK_SUB_DURATIONS_2","STOCK_SUB_DURATIONS_3","trySlotDuration","format1","format2","weekNumbersVisible","weekNumbers","format0","year","month","week","weekday","omitCommas","hour","minute","omitZeroMinute","meridiem","params","second","millisecond","res","diffWholeYears","diffWholeMonths","prevWeekNumber","slotDates_1","slotDate","weekNumber","computeWeekNumber","formats","format","rowUnits","getLargestUnit","row","leadingCell","isSuperRow","newCell","text","buildCellObject","weekStart","rowUnit","type","forceOff","TimelineNowIndicator","headParent","bodyParent","coord","styleProps","arrowEl","style","lineEl","unrender","STICKY_PROP_VAL","computeStickyPropVal","IS_MS_EDGE","navigator","userAgent","IS_SAFARI","STICKY_CLASSNAME","StickyScroller","isVertical","usingRelative","els","slice","elGeoms","queryElGeoms","viewportWidth","elDestinations","computeElDestinations","assignRelativePositions","assignStickyPositions","off","canvasOrigin","els_1","parentBound","parentNode","elRect","computedStyles","computedTextAlign","textAlign","intendedTextAlign","naturalBound","position","parseFloat","hasAttribute","elWidth","elHeight","viewportLeft","viewportTop","viewportRight","elGeom","destLeft","destTop","min","stickyLeft","setAttribute","indexOf","TimeAxis","renderSkeleton","_renderSkeleton","_unrenderSkeleton","layout","options","header","receiveProps","slats","headerEnhancedScroller","bodyEnhancedScroller","headStickyScroller","bodyStickyScroller","nowIndicator","getNowIndicatorUnit","renderNowIndicator","dateToCoord","unrenderNowIndicator","isResize","applySlotWidth","computeSlotWidth","updateStickyScrollers","slotWidth","computeDefaultSlotWidth","maxInnerWidth","headingCellWidth","ceil","parseInt","containerWidth","containerMinWidth","nonLastSlotWidth","round","availableWidth","getClientWidth","computeDateSnapCoverage","snapDiffInt","snapCoverage","slotCoverage","slotIndex","originClientRect","rangeToCoords","computeDateScroll","duration","activeRange","queryDateScroll","applyDateScroll","scroll","TimelineLaneEventRenderer","masterContainerEl","timeAxis","renderSegHtml","seg","mirrorInfo","eventRange","eventDef","def","eventUi","ui","isDraggable","isResizableFromStart","isStart","isResizableFromEnd","isEnd","getSegClasses","timeText","getTimeText","getSkinCss","url","title","computeDisplayEventTime","computeDisplayEventEnd","computeEventTimeFormat","attachSegs","segs","segs_1","detachSegs","segs_2","computeSegSizes","segs_3","coords","assignSegSizes","segs_4","buildSegLevels","computeOffsetForSegs","segs_5","segLevels","sortEventSegs","segs_6","unplacedSeg","above","level","isLevelCollision","placedSeg","timeRowSegsCollide","_c","_d","belowSeg","segs_7","computeOffsetForSeg","seg0","seg1","TimelineLaneFillRenderer","toLowerCase","containerEl","TimelineLane","fgContainerEl","bgContainerEl","slicer","TimelineLaneSlicer","renderEventDrag","_renderEventDrag","_unrenderEventDrag","renderEventResize","_renderEventResize","_unrenderEventResize","fillRenderer","eventRenderer","mirrorRenderer","renderBusinessHours","renderSegs","bind","renderDateSelection","renderBgEvents","renderFgEvents","renderEventSelection","selectByInstanceId","unselectByInstanceId","slicedProps","sliceProps","nextDayThreshold","businessHourSegs","dateSelectionSegs","bgEventSegs","fgEventSegs","eventSelection","eventDrag","eventResize","state","hideByHash","affectedInstances","isDragging","sourceSeg","showByHash","segsForHighlight","computeSizes","assignSizes","sliceRange","origRange","normalRange","slicedRange","TimelineView","startInteractive","_startInteractive","_stopInteractive","timeAxisEl","registerInteractiveComponent","unregisterInteractiveComponent","lane","startNowIndicator","eventOverlap","renderSkeletonHtml","applyScroll","isViewUpdated","isDatesUpdated","isEventsUpdated","queryScroll","buildPositionCaches","queryHit","positionLeft","positionTop","slatHit","component","rect","layer","main","defaultView","views","timeline","class","eventResizableFromStart","timelineDay","timelineWeek","weeks","timelineMonth","timelineYear"],"sources":["/home/agik/agik/projects/Studies/kargeno-client-v2/node_modules/@fullcalendar/timeline/main.esm.js"],"sourcesContent":["/*!\nFullCalendar Timeline Plugin v4.4.3\nDocs & License: https://fullcalendar.io/scheduler\n(c) 2019 Adam Shaw\n*/\n\nimport { htmlToElement, forceClassName, applyStyle, debounce, preventDefault, ScrollComponent, EmitterMixin, removeElement, createElement, computeEdges, asRoughMs, isSingleDay, getDayClasses, findElements, Component, PositionCache, findChildren, isInt, multiplyDuration, config, createFormatter, greatestDurationDenominator, createDuration, wholeDivideDurations, addDays, startOfDay, computeVisibleDayRange, asRoughMinutes, padStart, asRoughSeconds, diffWholeDays, buildGotoAnchorHtml, htmlEscape, translateRect, memoizeRendering, rangeContainsMarker, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, computeHeightAndMargins, applyStyleProp, FgEventRenderer, FillRenderer, DateComponent, intersectRanges, addMs, Slicer, View, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function(d, b) {\n    extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n    extendStatics(d, b);\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function() {\n    __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n/*\nA rectangular area of content that lives within a Scroller.\nCan have \"gutters\", areas of dead spacing around the perimeter.\nAlso very useful for forcing a width, which a Scroller cannot do alone.\nHas a content area that lives above a background area.\n*/\nvar ScrollerCanvas = /** @class */ (function () {\n    function ScrollerCanvas() {\n        this.gutters = {};\n        this.el = htmlToElement(\"<div class=\\\"fc-scroller-canvas\\\"> <div class=\\\"fc-content\\\"></div> <div class=\\\"fc-bg\\\"></div> </div>\");\n        this.contentEl = this.el.querySelector('.fc-content');\n        this.bgEl = this.el.querySelector('.fc-bg');\n    }\n    /*\n    If falsy, resets all the gutters to 0\n    */\n    ScrollerCanvas.prototype.setGutters = function (gutters) {\n        if (!gutters) {\n            this.gutters = {};\n        }\n        else {\n            __assign(this.gutters, gutters);\n        }\n        this.updateSize();\n    };\n    ScrollerCanvas.prototype.setWidth = function (width) {\n        this.width = width;\n        this.updateSize();\n    };\n    ScrollerCanvas.prototype.setMinWidth = function (minWidth) {\n        this.minWidth = minWidth;\n        this.updateSize();\n    };\n    ScrollerCanvas.prototype.clearWidth = function () {\n        this.width = null;\n        this.minWidth = null;\n        this.updateSize();\n    };\n    ScrollerCanvas.prototype.updateSize = function () {\n        var _a = this, gutters = _a.gutters, el = _a.el;\n        // is border-box (width includes padding)\n        forceClassName(el, 'fc-gutter-left', gutters.left);\n        forceClassName(el, 'fc-gutter-right', gutters.right);\n        forceClassName(el, 'fc-gutter-top', gutters.top);\n        forceClassName(el, 'fc-gutter-bottom', gutters.bottom);\n        applyStyle(el, {\n            paddingLeft: gutters.left || '',\n            paddingRight: gutters.right || '',\n            paddingTop: gutters.top || '',\n            paddingBottom: gutters.bottom || '',\n            width: (this.width != null) ?\n                this.width + (gutters.left || 0) + (gutters.right || 0) :\n                '',\n            minWidth: (this.minWidth != null) ?\n                this.minWidth + (gutters.left || 0) + (gutters.right || 0) :\n                ''\n        });\n        applyStyle(this.bgEl, {\n            left: gutters.left || '',\n            right: gutters.right || '',\n            top: gutters.top || '',\n            bottom: gutters.bottom || ''\n        });\n    };\n    return ScrollerCanvas;\n}());\n\nvar EnhancedScroller = /** @class */ (function (_super) {\n    __extends(EnhancedScroller, _super);\n    function EnhancedScroller(overflowX, overflowY) {\n        var _this = _super.call(this, overflowX, overflowY) || this;\n        // Scroll Events\n        // ----------------------------------------------------------------------------------------------\n        _this.reportScroll = function () {\n            if (!_this.isScrolling) {\n                _this.reportScrollStart();\n            }\n            _this.trigger('scroll');\n            _this.isMoving = true;\n            _this.requestMovingEnd();\n        };\n        _this.reportScrollStart = function () {\n            if (!_this.isScrolling) {\n                _this.isScrolling = true;\n                _this.trigger('scrollStart', _this.isTouching); // created in constructor\n            }\n        };\n        // Touch Events\n        // ----------------------------------------------------------------------------------------------\n        // will fire *before* the scroll event is fired\n        _this.reportTouchStart = function () {\n            _this.isTouching = true;\n        };\n        _this.reportTouchEnd = function () {\n            if (_this.isTouching) {\n                _this.isTouching = false;\n                // if touch scrolling was re-enabled during a recent touch scroll\n                // then unbind the handlers that are preventing it from happening.\n                if (_this.isTouchScrollEnabled) {\n                    _this.unbindPreventTouchScroll(); // won't do anything if not bound\n                }\n                // if the user ended their touch, and the scroll area wasn't moving,\n                // we consider this to be the end of the scroll.\n                if (!_this.isMoving) {\n                    _this.reportScrollEnd(); // won't fire if already ended\n                }\n            }\n        };\n        _this.isScrolling = false;\n        _this.isTouching = false;\n        _this.isMoving = false;\n        _this.isTouchScrollEnabled = true;\n        _this.requestMovingEnd = debounce(_this.reportMovingEnd, 500);\n        _this.canvas = new ScrollerCanvas();\n        _this.el.appendChild(_this.canvas.el);\n        _this.applyOverflow();\n        _this.bindHandlers();\n        return _this;\n    }\n    EnhancedScroller.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unbindHandlers();\n    };\n    // Touch scroll prevention\n    // ----------------------------------------------------------------------------------------------\n    EnhancedScroller.prototype.disableTouchScroll = function () {\n        this.isTouchScrollEnabled = false;\n        this.bindPreventTouchScroll(); // will be unbound in enableTouchScroll or reportTouchEnd\n    };\n    EnhancedScroller.prototype.enableTouchScroll = function () {\n        this.isTouchScrollEnabled = true;\n        // only immediately unbind if a touch event is NOT in progress.\n        // otherwise, it will be handled by reportTouchEnd.\n        if (!this.isTouching) {\n            this.unbindPreventTouchScroll();\n        }\n    };\n    EnhancedScroller.prototype.bindPreventTouchScroll = function () {\n        if (!this.preventTouchScrollHandler) {\n            this.el.addEventListener('touchmove', (this.preventTouchScrollHandler = preventDefault));\n        }\n    };\n    EnhancedScroller.prototype.unbindPreventTouchScroll = function () {\n        if (this.preventTouchScrollHandler) {\n            this.el.removeEventListener('touchmove', this.preventTouchScrollHandler);\n            this.preventTouchScrollHandler = null;\n        }\n    };\n    // Handlers\n    // ----------------------------------------------------------------------------------------------\n    EnhancedScroller.prototype.bindHandlers = function () {\n        this.el.addEventListener('scroll', this.reportScroll);\n        this.el.addEventListener('touchstart', this.reportTouchStart, { passive: true });\n        this.el.addEventListener('touchend', this.reportTouchEnd);\n    };\n    EnhancedScroller.prototype.unbindHandlers = function () {\n        this.el.removeEventListener('scroll', this.reportScroll);\n        this.el.removeEventListener('touchstart', this.reportTouchStart, { passive: true });\n        this.el.removeEventListener('touchend', this.reportTouchEnd);\n    };\n    EnhancedScroller.prototype.reportMovingEnd = function () {\n        this.isMoving = false;\n        // only end the scroll if not currently touching.\n        // if touching, the scrolling will end later, on touchend.\n        if (!this.isTouching) {\n            this.reportScrollEnd();\n        }\n    };\n    EnhancedScroller.prototype.reportScrollEnd = function () {\n        if (this.isScrolling) {\n            this.trigger('scrollEnd');\n            this.isScrolling = false;\n        }\n    };\n    // Horizontal Scroll Normalization\n    // ----------------------------------------------------------------------------------------------\n    // http://stackoverflow.com/questions/24276619/better-way-to-get-the-viewport-of-a-scrollable-div-in-rtl-mode/24394376#24394376\n    // TODO: move all this to util functions\n    /*\n    If RTL, and scrolled to the left, returns NEGATIVE value (like Firefox)\n    */\n    EnhancedScroller.prototype.getScrollLeft = function () {\n        var el = this.el;\n        var direction = window.getComputedStyle(el).direction;\n        var val = el.scrollLeft;\n        if (direction === 'rtl') {\n            switch (getRtlScrollSystem()) {\n                case 'positive':\n                    val = (val + el.clientWidth) - el.scrollWidth;\n                    break;\n                case 'reverse':\n                    val = -val;\n                    break;\n            }\n        }\n        return val;\n    };\n    /*\n    Accepts a NEGATIVE value for when scrolled in RTL\n    */\n    EnhancedScroller.prototype.setScrollLeft = function (val) {\n        var el = this.el;\n        var direction = window.getComputedStyle(el).direction;\n        if (direction === 'rtl') {\n            switch (getRtlScrollSystem()) {\n                case 'positive':\n                    val = (val - el.clientWidth) + el.scrollWidth;\n                    break;\n                case 'reverse':\n                    val = -val;\n                    break;\n            }\n        }\n        el.scrollLeft = val;\n    };\n    /*\n    Always returns the number of pixels scrolled from the leftmost position (even if RTL).\n    Always positive.\n    */\n    EnhancedScroller.prototype.getScrollFromLeft = function () {\n        var el = this.el;\n        var direction = window.getComputedStyle(el).direction;\n        var val = el.scrollLeft;\n        if (direction === 'rtl') {\n            switch (getRtlScrollSystem()) {\n                case 'negative':\n                    val = (val - el.clientWidth) + el.scrollWidth;\n                    break;\n                case 'reverse':\n                    val = (-val - el.clientWidth) + el.scrollWidth;\n                    break;\n            }\n        }\n        return val;\n    };\n    return EnhancedScroller;\n}(ScrollComponent));\nEmitterMixin.mixInto(EnhancedScroller);\n// Horizontal Scroll System Detection\n// ----------------------------------------------------------------------------------------------\nvar _rtlScrollSystem;\nfunction getRtlScrollSystem() {\n    return _rtlScrollSystem || (_rtlScrollSystem = detectRtlScrollSystem());\n}\nfunction detectRtlScrollSystem() {\n    var el = htmlToElement(\"<div style=\\\" position: absolute; top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 100px; \\\">A</div>\");\n    document.body.appendChild(el);\n    var system;\n    if (el.scrollLeft > 0) {\n        system = 'positive';\n    }\n    else {\n        el.scrollLeft = 1;\n        if (el.scrollLeft > 0) {\n            system = 'reverse';\n        }\n        else {\n            system = 'negative';\n        }\n    }\n    removeElement(el);\n    return system;\n}\n\n/*\nA Scroller, but with a wrapping div that allows \"clipping\" away of native scrollbars,\ngiving the appearance that there are no scrollbars.\n*/\nvar ClippedScroller = /** @class */ (function () {\n    /*\n    Received overflows can be set to 'clipped', meaning scrollbars shouldn't be visible\n    to the user, but the area should still scroll.\n    */\n    function ClippedScroller(overflowX, overflowY, parentEl) {\n        this.isHScrollbarsClipped = false;\n        this.isVScrollbarsClipped = false;\n        if (overflowX === 'clipped-scroll') {\n            overflowX = 'scroll';\n            this.isHScrollbarsClipped = true;\n        }\n        if (overflowY === 'clipped-scroll') {\n            overflowY = 'scroll';\n            this.isVScrollbarsClipped = true;\n        }\n        this.enhancedScroll = new EnhancedScroller(overflowX, overflowY);\n        parentEl.appendChild(this.el = createElement('div', {\n            className: 'fc-scroller-clip'\n        }));\n        this.el.appendChild(this.enhancedScroll.el);\n    }\n    ClippedScroller.prototype.destroy = function () {\n        removeElement(this.el);\n    };\n    ClippedScroller.prototype.updateSize = function () {\n        var enhancedScroll = this.enhancedScroll;\n        var scrollEl = enhancedScroll.el;\n        var edges = computeEdges(scrollEl);\n        var cssProps = { marginLeft: 0, marginRight: 0, marginTop: 0, marginBottom: 0 };\n        // give the inner scrolling div negative margins so that its scrollbars\n        // are nudged outside of the bounding box of the wrapper, which is overflow:hidden\n        if (this.isVScrollbarsClipped) {\n            cssProps.marginLeft = -edges.scrollbarLeft;\n            cssProps.marginRight = -edges.scrollbarRight;\n        }\n        if (this.isHScrollbarsClipped) {\n            cssProps.marginBottom = -edges.scrollbarBottom;\n        }\n        applyStyle(scrollEl, cssProps);\n        // if we are attempting to hide the scrollbars offscreen, OSX/iOS will still\n        // display the floating scrollbars. attach a className to force-hide them.\n        if ((this.isHScrollbarsClipped || (enhancedScroll.overflowX === 'hidden')) && // should never show?\n            (this.isVScrollbarsClipped || (enhancedScroll.overflowY === 'hidden')) && // should never show?\n            !( // doesn't have any scrollbar mass\n            edges.scrollbarLeft ||\n                edges.scrollbarRight ||\n                edges.scrollbarBottom)) {\n            scrollEl.classList.add('fc-no-scrollbars');\n        }\n        else {\n            scrollEl.classList.remove('fc-no-scrollbars');\n        }\n    };\n    ClippedScroller.prototype.setHeight = function (height) {\n        this.enhancedScroll.setHeight(height);\n    };\n    /*\n    Accounts for 'clipped' scrollbars\n    */\n    ClippedScroller.prototype.getScrollbarWidths = function () {\n        var widths = this.enhancedScroll.getScrollbarWidths();\n        if (this.isVScrollbarsClipped) {\n            widths.left = 0;\n            widths.right = 0;\n        }\n        if (this.isHScrollbarsClipped) {\n            widths.bottom = 0;\n        }\n        return widths;\n    };\n    return ClippedScroller;\n}());\n\nvar ScrollJoiner = /** @class */ (function () {\n    function ScrollJoiner(axis, scrollers) {\n        this.axis = axis;\n        this.scrollers = scrollers;\n        for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n            var scroller = _a[_i];\n            this.initScroller(scroller);\n        }\n    }\n    ScrollJoiner.prototype.initScroller = function (scroller) {\n        var _this = this;\n        var enhancedScroll = scroller.enhancedScroll;\n        // when the user scrolls via mousewheel, we know for sure the target\n        // scroller should be the master. capture the various x-browser events that fire.\n        var onScroll = function () {\n            _this.assignMasterScroller(scroller);\n        };\n        'wheel mousewheel DomMouseScroll MozMousePixelScroll'.split(' ').forEach(function (evName) {\n            enhancedScroll.el.addEventListener(evName, onScroll);\n        });\n        enhancedScroll\n            .on('scrollStart', function () {\n            if (!_this.masterScroller) {\n                _this.assignMasterScroller(scroller);\n            }\n        })\n            .on('scroll', function () {\n            if (scroller === _this.masterScroller) {\n                for (var _i = 0, _a = _this.scrollers; _i < _a.length; _i++) {\n                    var otherScroller = _a[_i];\n                    if (otherScroller !== scroller) {\n                        switch (_this.axis) {\n                            case 'horizontal':\n                                otherScroller.enhancedScroll.el.scrollLeft = enhancedScroll.el.scrollLeft;\n                                break;\n                            case 'vertical':\n                                otherScroller.enhancedScroll.setScrollTop(enhancedScroll.getScrollTop());\n                                break;\n                        }\n                    }\n                }\n            }\n        })\n            .on('scrollEnd', function () {\n            if (scroller === _this.masterScroller) {\n                _this.unassignMasterScroller();\n            }\n        });\n    };\n    ScrollJoiner.prototype.assignMasterScroller = function (scroller) {\n        this.unassignMasterScroller();\n        this.masterScroller = scroller;\n        for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n            var otherScroller = _a[_i];\n            if (otherScroller !== scroller) {\n                otherScroller.enhancedScroll.disableTouchScroll();\n            }\n        }\n    };\n    ScrollJoiner.prototype.unassignMasterScroller = function () {\n        if (this.masterScroller) {\n            for (var _i = 0, _a = this.scrollers; _i < _a.length; _i++) {\n                var otherScroller = _a[_i];\n                otherScroller.enhancedScroll.enableTouchScroll();\n            }\n            this.masterScroller = null;\n        }\n    };\n    ScrollJoiner.prototype.update = function () {\n        var allWidths = this.scrollers.map(function (scroller) { return scroller.getScrollbarWidths(); });\n        var maxLeft = 0;\n        var maxRight = 0;\n        var maxTop = 0;\n        var maxBottom = 0;\n        var widths;\n        var i;\n        for (var _i = 0, allWidths_1 = allWidths; _i < allWidths_1.length; _i++) {\n            widths = allWidths_1[_i];\n            maxLeft = Math.max(maxLeft, widths.left);\n            maxRight = Math.max(maxRight, widths.right);\n            maxTop = Math.max(maxTop, widths.top);\n            maxBottom = Math.max(maxBottom, widths.bottom);\n        }\n        for (i = 0; i < this.scrollers.length; i++) {\n            var scroller = this.scrollers[i];\n            widths = allWidths[i];\n            scroller.enhancedScroll.canvas.setGutters(this.axis === 'horizontal' ?\n                {\n                    left: maxLeft - widths.left,\n                    right: maxRight - widths.right\n                } :\n                {\n                    top: maxTop - widths.top,\n                    bottom: maxBottom - widths.bottom\n                });\n        }\n    };\n    return ScrollJoiner;\n}());\n\nvar HeaderBodyLayout = /** @class */ (function () {\n    /*\n    verticalScroll = 'auto' | 'clipped-scroll'\n    */\n    function HeaderBodyLayout(headerContainerEl, bodyContainerEl, verticalScroll) {\n        this.headerScroller = new ClippedScroller('clipped-scroll', 'hidden', headerContainerEl);\n        this.bodyScroller = new ClippedScroller('auto', verticalScroll, bodyContainerEl);\n        this.scrollJoiner = new ScrollJoiner('horizontal', [\n            this.headerScroller,\n            this.bodyScroller\n        ]);\n    }\n    HeaderBodyLayout.prototype.destroy = function () {\n        this.headerScroller.destroy();\n        this.bodyScroller.destroy();\n    };\n    HeaderBodyLayout.prototype.setHeight = function (totalHeight, isAuto) {\n        var bodyHeight;\n        if (isAuto) {\n            bodyHeight = 'auto';\n        }\n        else {\n            bodyHeight = totalHeight - this.queryHeadHeight();\n        }\n        this.bodyScroller.setHeight(bodyHeight);\n        this.headerScroller.updateSize(); // adjusts gutters and classNames\n        this.bodyScroller.updateSize(); // adjusts gutters and classNames\n        this.scrollJoiner.update();\n    };\n    HeaderBodyLayout.prototype.queryHeadHeight = function () {\n        return this.headerScroller.enhancedScroll.canvas.contentEl.getBoundingClientRect().height;\n    };\n    return HeaderBodyLayout;\n}());\n\nvar TimelineHeader = /** @class */ (function (_super) {\n    __extends(TimelineHeader, _super);\n    function TimelineHeader(parentEl) {\n        var _this = _super.call(this) || this;\n        _this.parentEl = parentEl;\n        return _this;\n    }\n    TimelineHeader.prototype.firstContext = function (context) {\n        this.parentEl.appendChild(this.tableEl = createElement('table', {\n            className: context.theme.getClass('tableGrid')\n        }));\n    };\n    TimelineHeader.prototype.destroy = function () {\n        removeElement(this.tableEl);\n        _super.prototype.destroy.call(this);\n    };\n    TimelineHeader.prototype.render = function (props) {\n        this.renderDates(props.tDateProfile);\n    };\n    TimelineHeader.prototype.renderDates = function (tDateProfile) {\n        var _a = this.context, dateEnv = _a.dateEnv, theme = _a.theme;\n        var cellRows = tDateProfile.cellRows;\n        var lastRow = cellRows[cellRows.length - 1];\n        var isChrono = asRoughMs(tDateProfile.labelInterval) > asRoughMs(tDateProfile.slotDuration);\n        var oneDay = isSingleDay(tDateProfile.slotDuration);\n        var html = '<colgroup>';\n        // needs to be a col for each body slat. header cells will have colspans\n        for (var i = tDateProfile.slotCnt - 1; i >= 0; i--) {\n            html += '<col/>';\n        }\n        html += '</colgroup>';\n        html += '<tbody>';\n        for (var _i = 0, cellRows_1 = cellRows; _i < cellRows_1.length; _i++) {\n            var rowCells = cellRows_1[_i];\n            var isLast = rowCells === lastRow;\n            html += '<tr' + (isChrono && isLast ? ' class=\"fc-chrono\"' : '') + '>';\n            for (var _b = 0, rowCells_1 = rowCells; _b < rowCells_1.length; _b++) {\n                var cell = rowCells_1[_b];\n                var headerCellClassNames = [theme.getClass('widgetHeader')];\n                if (cell.isWeekStart) {\n                    headerCellClassNames.push('fc-em-cell');\n                }\n                if (oneDay) {\n                    headerCellClassNames = headerCellClassNames.concat(getDayClasses(cell.date, this.props.dateProfile, this.context, true) // adds \"today\" class and other day-based classes\n                    );\n                }\n                html +=\n                    '<th class=\"' + headerCellClassNames.join(' ') + '\"' +\n                        ' data-date=\"' + dateEnv.formatIso(cell.date, { omitTime: !tDateProfile.isTimeScale, omitTimeZoneOffset: true }) + '\"' +\n                        (cell.colspan > 1 ? ' colspan=\"' + cell.colspan + '\"' : '') +\n                        '>' +\n                        '<div class=\"fc-cell-content\">' +\n                        cell.spanHtml +\n                        '</div>' +\n                        '</th>';\n            }\n            html += '</tr>';\n        }\n        html += '</tbody>';\n        this.tableEl.innerHTML = html; // TODO: does this work cross-browser?\n        this.slatColEls = findElements(this.tableEl, 'col');\n        this.innerEls = findElements(this.tableEl.querySelector('tr:last-child'), // compound selector won't work because of query-root problem\n        'th .fc-cell-text');\n        findElements(this.tableEl.querySelectorAll('tr:not(:last-child)'), // compound selector won't work because of query-root problem\n        'th .fc-cell-text').forEach(function (innerEl) {\n            innerEl.classList.add('fc-sticky');\n        });\n    };\n    return TimelineHeader;\n}(Component));\n\nvar TimelineSlats = /** @class */ (function (_super) {\n    __extends(TimelineSlats, _super);\n    function TimelineSlats(parentEl) {\n        var _this = _super.call(this) || this;\n        parentEl.appendChild(_this.el = createElement('div', { className: 'fc-slats' }));\n        return _this;\n    }\n    TimelineSlats.prototype.destroy = function () {\n        removeElement(this.el);\n        _super.prototype.destroy.call(this);\n    };\n    TimelineSlats.prototype.render = function (props) {\n        this.renderDates(props.tDateProfile);\n    };\n    TimelineSlats.prototype.renderDates = function (tDateProfile) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, theme = _a.theme, dateEnv = _a.dateEnv;\n        var slotDates = tDateProfile.slotDates, isWeekStarts = tDateProfile.isWeekStarts;\n        var html = '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            '<colgroup>';\n        for (var i = 0; i < slotDates.length; i++) {\n            html += '<col/>';\n        }\n        html += '</colgroup>';\n        html += '<tbody><tr>';\n        for (var i = 0; i < slotDates.length; i++) {\n            html += this.slatCellHtml(slotDates[i], isWeekStarts[i], tDateProfile);\n        }\n        html += '</tr></tbody></table>';\n        this.el.innerHTML = html;\n        this.slatColEls = findElements(this.el, 'col');\n        this.slatEls = findElements(this.el, 'td');\n        for (var i = 0; i < slotDates.length; i++) {\n            calendar.publiclyTrigger('dayRender', [\n                {\n                    date: dateEnv.toDate(slotDates[i]),\n                    el: this.slatEls[i],\n                    view: view\n                }\n            ]);\n        }\n        this.outerCoordCache = new PositionCache(this.el, this.slatEls, true, // isHorizontal\n        false // isVertical\n        );\n        // for the inner divs within the slats\n        // used for event rendering and scrollTime, to disregard slat border\n        this.innerCoordCache = new PositionCache(this.el, findChildren(this.slatEls, 'div'), true, // isHorizontal\n        false // isVertical\n        );\n    };\n    TimelineSlats.prototype.slatCellHtml = function (date, isEm, tDateProfile) {\n        var _a = this.context, theme = _a.theme, dateEnv = _a.dateEnv;\n        var classes;\n        if (tDateProfile.isTimeScale) {\n            classes = [];\n            classes.push(isInt(dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.labelInterval)) ?\n                'fc-major' :\n                'fc-minor');\n        }\n        else {\n            classes = getDayClasses(date, this.props.dateProfile, this.context);\n            classes.push('fc-day');\n        }\n        classes.unshift(theme.getClass('widgetContent'));\n        if (isEm) {\n            classes.push('fc-em-cell');\n        }\n        return '<td class=\"' + classes.join(' ') + '\"' +\n            ' data-date=\"' + dateEnv.formatIso(date, { omitTime: !tDateProfile.isTimeScale, omitTimeZoneOffset: true }) + '\"' +\n            '><div></div></td>';\n    };\n    TimelineSlats.prototype.updateSize = function () {\n        this.outerCoordCache.build();\n        this.innerCoordCache.build();\n    };\n    TimelineSlats.prototype.positionToHit = function (leftPosition) {\n        var outerCoordCache = this.outerCoordCache;\n        var _a = this.context, dateEnv = _a.dateEnv, isRtl = _a.isRtl;\n        var tDateProfile = this.props.tDateProfile;\n        var slatIndex = outerCoordCache.leftToIndex(leftPosition);\n        if (slatIndex != null) {\n            // somewhat similar to what TimeGrid does. consolidate?\n            var slatWidth = outerCoordCache.getWidth(slatIndex);\n            var partial = isRtl ?\n                (outerCoordCache.rights[slatIndex] - leftPosition) / slatWidth :\n                (leftPosition - outerCoordCache.lefts[slatIndex]) / slatWidth;\n            var localSnapIndex = Math.floor(partial * tDateProfile.snapsPerSlot);\n            var start = dateEnv.add(tDateProfile.slotDates[slatIndex], multiplyDuration(tDateProfile.snapDuration, localSnapIndex));\n            var end = dateEnv.add(start, tDateProfile.snapDuration);\n            return {\n                dateSpan: {\n                    range: { start: start, end: end },\n                    allDay: !this.props.tDateProfile.isTimeScale\n                },\n                dayEl: this.slatColEls[slatIndex],\n                left: outerCoordCache.lefts[slatIndex],\n                right: outerCoordCache.rights[slatIndex]\n            };\n        }\n        return null;\n    };\n    return TimelineSlats;\n}(Component));\n\nvar MIN_AUTO_LABELS = 18; // more than `12` months but less that `24` hours\nvar MAX_AUTO_SLOTS_PER_LABEL = 6; // allows 6 10-min slots in an hour\nvar MAX_AUTO_CELLS = 200; // allows 4-days to have a :30 slot duration\nconfig.MAX_TIMELINE_SLOTS = 1000;\n// potential nice values for slot-duration and interval-duration\nvar STOCK_SUB_DURATIONS = [\n    { years: 1 },\n    { months: 1 },\n    { days: 1 },\n    { hours: 1 },\n    { minutes: 30 },\n    { minutes: 15 },\n    { minutes: 10 },\n    { minutes: 5 },\n    { minutes: 1 },\n    { seconds: 30 },\n    { seconds: 15 },\n    { seconds: 10 },\n    { seconds: 5 },\n    { seconds: 1 },\n    { milliseconds: 500 },\n    { milliseconds: 100 },\n    { milliseconds: 10 },\n    { milliseconds: 1 }\n];\nfunction buildTimelineDateProfile(dateProfile, dateEnv, allOptions, dateProfileGenerator) {\n    var tDateProfile = {\n        labelInterval: queryDurationOption(allOptions, 'slotLabelInterval'),\n        slotDuration: queryDurationOption(allOptions, 'slotDuration')\n    };\n    validateLabelAndSlot(tDateProfile, dateProfile, dateEnv); // validate after computed grid duration\n    ensureLabelInterval(tDateProfile, dateProfile, dateEnv);\n    ensureSlotDuration(tDateProfile, dateProfile, dateEnv);\n    var input = allOptions.slotLabelFormat;\n    var rawFormats = Array.isArray(input) ?\n        input\n        : (input != null) ?\n            [input]\n            :\n                computeHeaderFormats(tDateProfile, dateProfile, dateEnv, allOptions);\n    tDateProfile.headerFormats = rawFormats.map(function (rawFormat) {\n        return createFormatter(rawFormat);\n    });\n    tDateProfile.isTimeScale = Boolean(tDateProfile.slotDuration.milliseconds);\n    var largeUnit = null;\n    if (!tDateProfile.isTimeScale) {\n        var slotUnit = greatestDurationDenominator(tDateProfile.slotDuration).unit;\n        if (/year|month|week/.test(slotUnit)) {\n            largeUnit = slotUnit;\n        }\n    }\n    tDateProfile.largeUnit = largeUnit;\n    tDateProfile.emphasizeWeeks =\n        isSingleDay(tDateProfile.slotDuration) &&\n            currentRangeAs('weeks', dateProfile, dateEnv) >= 2 &&\n            !allOptions.businessHours;\n    /*\n    console.log('label interval =', timelineView.labelInterval.humanize())\n    console.log('slot duration =', timelineView.slotDuration.humanize())\n    console.log('header formats =', timelineView.headerFormats)\n    console.log('isTimeScale', timelineView.isTimeScale)\n    console.log('largeUnit', timelineView.largeUnit)\n    */\n    var rawSnapDuration = allOptions.snapDuration;\n    var snapDuration;\n    var snapsPerSlot;\n    if (rawSnapDuration) {\n        snapDuration = createDuration(rawSnapDuration);\n        snapsPerSlot = wholeDivideDurations(tDateProfile.slotDuration, snapDuration);\n        // ^ TODO: warning if not whole?\n    }\n    if (snapsPerSlot == null) {\n        snapDuration = tDateProfile.slotDuration;\n        snapsPerSlot = 1;\n    }\n    tDateProfile.snapDuration = snapDuration;\n    tDateProfile.snapsPerSlot = snapsPerSlot;\n    // more...\n    var timeWindowMs = asRoughMs(dateProfile.maxTime) - asRoughMs(dateProfile.minTime);\n    // TODO: why not use normalizeRange!?\n    var normalizedStart = normalizeDate(dateProfile.renderRange.start, tDateProfile, dateEnv);\n    var normalizedEnd = normalizeDate(dateProfile.renderRange.end, tDateProfile, dateEnv);\n    // apply minTime/maxTime\n    // TODO: View should be responsible.\n    if (tDateProfile.isTimeScale) {\n        normalizedStart = dateEnv.add(normalizedStart, dateProfile.minTime);\n        normalizedEnd = dateEnv.add(addDays(normalizedEnd, -1), dateProfile.maxTime);\n    }\n    tDateProfile.timeWindowMs = timeWindowMs;\n    tDateProfile.normalizedRange = { start: normalizedStart, end: normalizedEnd };\n    var slotDates = [];\n    var date = normalizedStart;\n    while (date < normalizedEnd) {\n        if (isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator)) {\n            slotDates.push(date);\n        }\n        date = dateEnv.add(date, tDateProfile.slotDuration);\n    }\n    tDateProfile.slotDates = slotDates;\n    // more...\n    var snapIndex = -1;\n    var snapDiff = 0; // index of the diff :(\n    var snapDiffToIndex = [];\n    var snapIndexToDiff = [];\n    date = normalizedStart;\n    while (date < normalizedEnd) {\n        if (isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator)) {\n            snapIndex++;\n            snapDiffToIndex.push(snapIndex);\n            snapIndexToDiff.push(snapDiff);\n        }\n        else {\n            snapDiffToIndex.push(snapIndex + 0.5);\n        }\n        date = dateEnv.add(date, tDateProfile.snapDuration);\n        snapDiff++;\n    }\n    tDateProfile.snapDiffToIndex = snapDiffToIndex;\n    tDateProfile.snapIndexToDiff = snapIndexToDiff;\n    tDateProfile.snapCnt = snapIndex + 1; // is always one behind\n    tDateProfile.slotCnt = tDateProfile.snapCnt / tDateProfile.snapsPerSlot;\n    // more...\n    tDateProfile.isWeekStarts = buildIsWeekStarts(tDateProfile, dateEnv);\n    tDateProfile.cellRows = buildCellRows(tDateProfile, dateEnv, allOptions);\n    return tDateProfile;\n}\n/*\nsnaps to appropriate unit\n*/\nfunction normalizeDate(date, tDateProfile, dateEnv) {\n    var normalDate = date;\n    if (!tDateProfile.isTimeScale) {\n        normalDate = startOfDay(normalDate);\n        if (tDateProfile.largeUnit) {\n            normalDate = dateEnv.startOf(normalDate, tDateProfile.largeUnit);\n        }\n    }\n    return normalDate;\n}\n/*\nsnaps to appropriate unit\n*/\nfunction normalizeRange(range, tDateProfile, dateEnv) {\n    if (!tDateProfile.isTimeScale) {\n        range = computeVisibleDayRange(range);\n        if (tDateProfile.largeUnit) {\n            var dayRange = range; // preserve original result\n            range = {\n                start: dateEnv.startOf(range.start, tDateProfile.largeUnit),\n                end: dateEnv.startOf(range.end, tDateProfile.largeUnit)\n            };\n            // if date is partially through the interval, or is in the same interval as the start,\n            // make the exclusive end be the *next* interval\n            if (range.end.valueOf() !== dayRange.end.valueOf() || range.end <= range.start) {\n                range = {\n                    start: range.start,\n                    end: dateEnv.add(range.end, tDateProfile.slotDuration)\n                };\n            }\n        }\n    }\n    return range;\n}\nfunction isValidDate(date, tDateProfile, dateProfile, dateProfileGenerator) {\n    if (dateProfileGenerator.isHiddenDay(date)) {\n        return false;\n    }\n    else if (tDateProfile.isTimeScale) {\n        // determine if the time is within minTime/maxTime, which may have wacky values\n        var day = startOfDay(date);\n        var timeMs = date.valueOf() - day.valueOf();\n        var ms = timeMs - asRoughMs(dateProfile.minTime); // milliseconds since minTime\n        ms = ((ms % 86400000) + 86400000) % 86400000; // make negative values wrap to 24hr clock\n        return ms < tDateProfile.timeWindowMs; // before the maxTime?\n    }\n    else {\n        return true;\n    }\n}\nfunction queryDurationOption(allOptions, name) {\n    var input = allOptions[name];\n    if (input != null) {\n        return createDuration(input);\n    }\n}\nfunction validateLabelAndSlot(tDateProfile, dateProfile, dateEnv) {\n    var currentRange = dateProfile.currentRange;\n    // make sure labelInterval doesn't exceed the max number of cells\n    if (tDateProfile.labelInterval) {\n        var labelCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, tDateProfile.labelInterval);\n        if (labelCnt > config.MAX_TIMELINE_SLOTS) {\n            console.warn('slotLabelInterval results in too many cells');\n            tDateProfile.labelInterval = null;\n        }\n    }\n    // make sure slotDuration doesn't exceed the maximum number of cells\n    if (tDateProfile.slotDuration) {\n        var slotCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, tDateProfile.slotDuration);\n        if (slotCnt > config.MAX_TIMELINE_SLOTS) {\n            console.warn('slotDuration results in too many cells');\n            tDateProfile.slotDuration = null;\n        }\n    }\n    // make sure labelInterval is a multiple of slotDuration\n    if (tDateProfile.labelInterval && tDateProfile.slotDuration) {\n        var slotsPerLabel = wholeDivideDurations(tDateProfile.labelInterval, tDateProfile.slotDuration);\n        if (slotsPerLabel === null || slotsPerLabel < 1) {\n            console.warn('slotLabelInterval must be a multiple of slotDuration');\n            tDateProfile.slotDuration = null;\n        }\n    }\n}\nfunction ensureLabelInterval(tDateProfile, dateProfile, dateEnv) {\n    var currentRange = dateProfile.currentRange;\n    var labelInterval = tDateProfile.labelInterval;\n    if (!labelInterval) {\n        // compute based off the slot duration\n        // find the largest label interval with an acceptable slots-per-label\n        var input = void 0;\n        if (tDateProfile.slotDuration) {\n            for (var _i = 0, STOCK_SUB_DURATIONS_1 = STOCK_SUB_DURATIONS; _i < STOCK_SUB_DURATIONS_1.length; _i++) {\n                input = STOCK_SUB_DURATIONS_1[_i];\n                var tryLabelInterval = createDuration(input);\n                var slotsPerLabel = wholeDivideDurations(tryLabelInterval, tDateProfile.slotDuration);\n                if (slotsPerLabel !== null && slotsPerLabel <= MAX_AUTO_SLOTS_PER_LABEL) {\n                    labelInterval = tryLabelInterval;\n                    break;\n                }\n            }\n            // use the slot duration as a last resort\n            if (!labelInterval) {\n                labelInterval = tDateProfile.slotDuration;\n            }\n            // compute based off the view's duration\n            // find the largest label interval that yields the minimum number of labels\n        }\n        else {\n            for (var _a = 0, STOCK_SUB_DURATIONS_2 = STOCK_SUB_DURATIONS; _a < STOCK_SUB_DURATIONS_2.length; _a++) {\n                input = STOCK_SUB_DURATIONS_2[_a];\n                labelInterval = createDuration(input);\n                var labelCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, labelInterval);\n                if (labelCnt >= MIN_AUTO_LABELS) {\n                    break;\n                }\n            }\n        }\n        tDateProfile.labelInterval = labelInterval;\n    }\n    return labelInterval;\n}\nfunction ensureSlotDuration(tDateProfile, dateProfile, dateEnv) {\n    var currentRange = dateProfile.currentRange;\n    var slotDuration = tDateProfile.slotDuration;\n    if (!slotDuration) {\n        var labelInterval = ensureLabelInterval(tDateProfile, dateProfile, dateEnv); // will compute if necessary\n        // compute based off the label interval\n        // find the largest slot duration that is different from labelInterval, but still acceptable\n        for (var _i = 0, STOCK_SUB_DURATIONS_3 = STOCK_SUB_DURATIONS; _i < STOCK_SUB_DURATIONS_3.length; _i++) {\n            var input = STOCK_SUB_DURATIONS_3[_i];\n            var trySlotDuration = createDuration(input);\n            var slotsPerLabel = wholeDivideDurations(labelInterval, trySlotDuration);\n            if (slotsPerLabel !== null && slotsPerLabel > 1 && slotsPerLabel <= MAX_AUTO_SLOTS_PER_LABEL) {\n                slotDuration = trySlotDuration;\n                break;\n            }\n        }\n        // only allow the value if it won't exceed the view's # of slots limit\n        if (slotDuration) {\n            var slotCnt = dateEnv.countDurationsBetween(currentRange.start, currentRange.end, slotDuration);\n            if (slotCnt > MAX_AUTO_CELLS) {\n                slotDuration = null;\n            }\n        }\n        // use the label interval as a last resort\n        if (!slotDuration) {\n            slotDuration = labelInterval;\n        }\n        tDateProfile.slotDuration = slotDuration;\n    }\n    return slotDuration;\n}\nfunction computeHeaderFormats(tDateProfile, dateProfile, dateEnv, allOptions) {\n    var format1;\n    var format2;\n    var labelInterval = tDateProfile.labelInterval;\n    var unit = greatestDurationDenominator(labelInterval).unit;\n    var weekNumbersVisible = allOptions.weekNumbers;\n    var format0 = (format1 = (format2 = null));\n    // NOTE: weekNumber computation function wont work\n    if ((unit === 'week') && !weekNumbersVisible) {\n        unit = 'day';\n    }\n    switch (unit) {\n        case 'year':\n            format0 = { year: 'numeric' }; // '2015'\n            break;\n        case 'month':\n            if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n                format0 = { year: 'numeric' }; // '2015'\n            }\n            format1 = { month: 'short' }; // 'Jan'\n            break;\n        case 'week':\n            if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n                format0 = { year: 'numeric' }; // '2015'\n            }\n            format1 = { week: 'narrow' }; // 'Wk4'\n            break;\n        case 'day':\n            if (currentRangeAs('years', dateProfile, dateEnv) > 1) {\n                format0 = { year: 'numeric', month: 'long' }; // 'January 2014'\n            }\n            else if (currentRangeAs('months', dateProfile, dateEnv) > 1) {\n                format0 = { month: 'long' }; // 'January'\n            }\n            if (weekNumbersVisible) {\n                format1 = { week: 'short' }; // 'Wk 4'\n            }\n            format2 = { weekday: 'narrow', day: 'numeric' }; // 'Su 9'\n            break;\n        case 'hour':\n            if (weekNumbersVisible) {\n                format0 = { week: 'short' }; // 'Wk 4'\n            }\n            if (currentRangeAs('days', dateProfile, dateEnv) > 1) {\n                format1 = { weekday: 'short', day: 'numeric', month: 'numeric', omitCommas: true }; // Sat 4/7\n            }\n            format2 = {\n                hour: 'numeric',\n                minute: '2-digit',\n                omitZeroMinute: true,\n                meridiem: 'short'\n            };\n            break;\n        case 'minute':\n            // sufficiently large number of different minute cells?\n            if ((asRoughMinutes(labelInterval) / 60) >= MAX_AUTO_SLOTS_PER_LABEL) {\n                format0 = {\n                    hour: 'numeric',\n                    meridiem: 'short'\n                };\n                format1 = function (params) {\n                    return ':' + padStart(params.date.minute, 2); // ':30'\n                };\n            }\n            else {\n                format0 = {\n                    hour: 'numeric',\n                    minute: 'numeric',\n                    meridiem: 'short'\n                };\n            }\n            break;\n        case 'second':\n            // sufficiently large number of different second cells?\n            if ((asRoughSeconds(labelInterval) / 60) >= MAX_AUTO_SLOTS_PER_LABEL) {\n                format0 = { hour: 'numeric', minute: '2-digit', meridiem: 'lowercase' }; // '8:30 PM'\n                format1 = function (params) {\n                    return ':' + padStart(params.date.second, 2); // ':30'\n                };\n            }\n            else {\n                format0 = { hour: 'numeric', minute: '2-digit', second: '2-digit', meridiem: 'lowercase' }; // '8:30:45 PM'\n            }\n            break;\n        case 'millisecond':\n            format0 = { hour: 'numeric', minute: '2-digit', second: '2-digit', meridiem: 'lowercase' }; // '8:30:45 PM'\n            format1 = function (params) {\n                return '.' + padStart(params.millisecond, 3);\n            };\n            break;\n    }\n    return [].concat(format0 || [], format1 || [], format2 || []);\n}\n// Compute the number of the give units in the \"current\" range.\n// Won't go more precise than days.\n// Will return `0` if there's not a clean whole interval.\nfunction currentRangeAs(unit, dateProfile, dateEnv) {\n    var range = dateProfile.currentRange;\n    var res = null;\n    if (unit === 'years') {\n        res = dateEnv.diffWholeYears(range.start, range.end);\n    }\n    else if (unit === 'months') {\n        res = dateEnv.diffWholeMonths(range.start, range.end);\n    }\n    else if (unit === 'weeks') {\n        res = dateEnv.diffWholeMonths(range.start, range.end);\n    }\n    else if (unit === 'days') {\n        res = diffWholeDays(range.start, range.end);\n    }\n    return res || 0;\n}\nfunction buildIsWeekStarts(tDateProfile, dateEnv) {\n    var slotDates = tDateProfile.slotDates, emphasizeWeeks = tDateProfile.emphasizeWeeks;\n    var prevWeekNumber = null;\n    var isWeekStarts = [];\n    for (var _i = 0, slotDates_1 = slotDates; _i < slotDates_1.length; _i++) {\n        var slotDate = slotDates_1[_i];\n        var weekNumber = dateEnv.computeWeekNumber(slotDate);\n        var isWeekStart = emphasizeWeeks && (prevWeekNumber !== null) && (prevWeekNumber !== weekNumber);\n        prevWeekNumber = weekNumber;\n        isWeekStarts.push(isWeekStart);\n    }\n    return isWeekStarts;\n}\nfunction buildCellRows(tDateProfile, dateEnv, allOptions) {\n    var slotDates = tDateProfile.slotDates;\n    var formats = tDateProfile.headerFormats;\n    var cellRows = formats.map(function (format) { return []; }); // indexed by row,col\n    // specifically for navclicks\n    var rowUnits = formats.map(function (format) {\n        return format.getLargestUnit ? format.getLargestUnit() : null;\n    });\n    // builds cellRows and slotCells\n    for (var i = 0; i < slotDates.length; i++) {\n        var date = slotDates[i];\n        var isWeekStart = tDateProfile.isWeekStarts[i];\n        for (var row = 0; row < formats.length; row++) {\n            var format = formats[row];\n            var rowCells = cellRows[row];\n            var leadingCell = rowCells[rowCells.length - 1];\n            var isSuperRow = (formats.length > 1) && (row < (formats.length - 1)); // more than one row and not the last\n            var newCell = null;\n            if (isSuperRow) {\n                var text = dateEnv.format(date, format);\n                if (!leadingCell || (leadingCell.text !== text)) {\n                    newCell = buildCellObject(date, text, rowUnits[row], allOptions, dateEnv);\n                }\n                else {\n                    leadingCell.colspan += 1;\n                }\n            }\n            else {\n                if (!leadingCell ||\n                    isInt(dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.labelInterval))) {\n                    var text = dateEnv.format(date, format);\n                    newCell = buildCellObject(date, text, rowUnits[row], allOptions, dateEnv);\n                }\n                else {\n                    leadingCell.colspan += 1;\n                }\n            }\n            if (newCell) {\n                newCell.weekStart = isWeekStart;\n                rowCells.push(newCell);\n            }\n        }\n    }\n    return cellRows;\n}\nfunction buildCellObject(date, text, rowUnit, allOptions, dateEnv) {\n    var spanHtml = buildGotoAnchorHtml(allOptions, dateEnv, {\n        date: date,\n        type: rowUnit,\n        forceOff: !rowUnit\n    }, {\n        'class': 'fc-cell-text'\n    }, htmlEscape(text));\n    return { text: text, spanHtml: spanHtml, date: date, colspan: 1, isWeekStart: false };\n}\n\nvar TimelineNowIndicator = /** @class */ (function () {\n    function TimelineNowIndicator(headParent, bodyParent) {\n        this.headParent = headParent;\n        this.bodyParent = bodyParent;\n    }\n    TimelineNowIndicator.prototype.render = function (coord, isRtl) {\n        var styleProps = isRtl ? { right: -coord } : { left: coord };\n        this.headParent.appendChild(this.arrowEl = createElement('div', {\n            className: 'fc-now-indicator fc-now-indicator-arrow',\n            style: styleProps\n        }));\n        this.bodyParent.appendChild(this.lineEl = createElement('div', {\n            className: 'fc-now-indicator fc-now-indicator-line',\n            style: styleProps\n        }));\n    };\n    TimelineNowIndicator.prototype.unrender = function () {\n        if (this.arrowEl) {\n            removeElement(this.arrowEl);\n        }\n        if (this.lineEl) {\n            removeElement(this.lineEl);\n        }\n    };\n    return TimelineNowIndicator;\n}());\n\nvar STICKY_PROP_VAL = computeStickyPropVal(); // if null, means not supported at all\nvar IS_MS_EDGE = /Edge/.test(navigator.userAgent);\nvar IS_SAFARI = STICKY_PROP_VAL === '-webkit-sticky'; // good b/c doesn't confuse chrome\nvar STICKY_CLASSNAME = 'fc-sticky';\n/*\nuseful beyond the native position:sticky for these reasons:\n- support in IE11\n- nice centering support\n*/\nvar StickyScroller = /** @class */ (function () {\n    function StickyScroller(scroller, isRtl, isVertical) {\n        var _this = this;\n        this.usingRelative = null;\n        /*\n        known bug: called twice on init. problem when mixing with ScrollJoiner\n        */\n        this.updateSize = function () {\n            var els = Array.prototype.slice.call(_this.scroller.canvas.el.querySelectorAll('.' + STICKY_CLASSNAME));\n            var elGeoms = _this.queryElGeoms(els);\n            var viewportWidth = _this.scroller.el.clientWidth;\n            if (_this.usingRelative) {\n                var elDestinations = _this.computeElDestinations(elGeoms, viewportWidth); // read before prepPositioning\n                assignRelativePositions(els, elGeoms, elDestinations);\n            }\n            else {\n                assignStickyPositions(els, elGeoms, viewportWidth);\n            }\n        };\n        this.scroller = scroller;\n        this.usingRelative =\n            !STICKY_PROP_VAL || // IE11\n                (IS_MS_EDGE && isRtl) || // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/18883305/\n                ((IS_MS_EDGE || IS_SAFARI) && isVertical); // because doesn't work with rowspan in tables, our only vertial use\n        if (this.usingRelative) {\n            scroller.on('scrollEnd', this.updateSize);\n        }\n    }\n    StickyScroller.prototype.destroy = function () {\n        this.scroller.off('scrollEnd', this.updateSize);\n    };\n    StickyScroller.prototype.queryElGeoms = function (els) {\n        var canvasOrigin = this.scroller.canvas.el.getBoundingClientRect();\n        var elGeoms = [];\n        for (var _i = 0, els_1 = els; _i < els_1.length; _i++) {\n            var el = els_1[_i];\n            var parentBound = translateRect(el.parentNode.getBoundingClientRect(), -canvasOrigin.left, -canvasOrigin.top);\n            var elRect = el.getBoundingClientRect();\n            var computedStyles = window.getComputedStyle(el);\n            var computedTextAlign = window.getComputedStyle(el.parentNode).textAlign; // ask the parent\n            var intendedTextAlign = computedTextAlign;\n            var naturalBound = null;\n            if (computedStyles.position !== 'sticky') {\n                naturalBound = translateRect(elRect, -canvasOrigin.left - (parseFloat(computedStyles.left) || 0), // could be 'auto'\n                -canvasOrigin.top - (parseFloat(computedStyles.top) || 0));\n            }\n            if (el.hasAttribute('data-sticky-center')) {\n                intendedTextAlign = 'center';\n            }\n            elGeoms.push({\n                parentBound: parentBound,\n                naturalBound: naturalBound,\n                elWidth: elRect.width,\n                elHeight: elRect.height,\n                computedTextAlign: computedTextAlign,\n                intendedTextAlign: intendedTextAlign\n            });\n        }\n        return elGeoms;\n    };\n    StickyScroller.prototype.computeElDestinations = function (elGeoms, viewportWidth) {\n        var viewportLeft = this.scroller.getScrollFromLeft();\n        var viewportTop = this.scroller.getScrollTop();\n        var viewportRight = viewportLeft + viewportWidth;\n        return elGeoms.map(function (elGeom) {\n            var elWidth = elGeom.elWidth, elHeight = elGeom.elHeight, parentBound = elGeom.parentBound, naturalBound = elGeom.naturalBound;\n            var destLeft; // relative to canvas topleft\n            var destTop; // \"\n            switch (elGeom.intendedTextAlign) {\n                case 'left':\n                    destLeft = viewportLeft;\n                    break;\n                case 'right':\n                    destLeft = viewportRight - elWidth;\n                    break;\n                case 'center':\n                    destLeft = (viewportLeft + viewportRight) / 2 - elWidth / 2;\n                    break;\n            }\n            destLeft = Math.min(destLeft, parentBound.right - elWidth);\n            destLeft = Math.max(destLeft, parentBound.left);\n            destTop = viewportTop;\n            destTop = Math.min(destTop, parentBound.bottom - elHeight);\n            destTop = Math.max(destTop, naturalBound.top); // better to use natural top for upper bound\n            return { left: destLeft, top: destTop };\n        });\n    };\n    return StickyScroller;\n}());\nfunction assignRelativePositions(els, elGeoms, elDestinations) {\n    els.forEach(function (el, i) {\n        var naturalBound = elGeoms[i].naturalBound;\n        applyStyle(el, {\n            position: 'relative',\n            left: elDestinations[i].left - naturalBound.left,\n            top: elDestinations[i].top - naturalBound.top\n        });\n    });\n}\nfunction assignStickyPositions(els, elGeoms, viewportWidth) {\n    els.forEach(function (el, i) {\n        var stickyLeft = 0;\n        if (elGeoms[i].intendedTextAlign === 'center') {\n            stickyLeft = (viewportWidth - elGeoms[i].elWidth) / 2;\n            // needs to be forced to left?\n            if (elGeoms[i].computedTextAlign === 'center') {\n                el.setAttribute('data-sticky-center', '') // remember for next queryElGeoms\n                ;\n                el.parentNode.style.textAlign = 'left';\n            }\n        }\n        applyStyle(el, {\n            position: STICKY_PROP_VAL,\n            left: stickyLeft,\n            right: 0,\n            top: 0\n        });\n    });\n}\nfunction computeStickyPropVal() {\n    var el = htmlToElement('<div style=\"position:-webkit-sticky;position:sticky\"></div>');\n    var val = el.style.position;\n    if (val.indexOf('sticky') !== -1) {\n        return val;\n    }\n    else {\n        return null;\n    }\n}\n\nvar TimeAxis = /** @class */ (function (_super) {\n    __extends(TimeAxis, _super);\n    function TimeAxis(headerContainerEl, bodyContainerEl) {\n        var _this = _super.call(this) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.layout = new HeaderBodyLayout(headerContainerEl, bodyContainerEl, 'auto');\n        return _this;\n    }\n    TimeAxis.prototype.render = function (props, context) {\n        var tDateProfile = this.tDateProfile =\n            buildTimelineDateProfile(props.dateProfile, context.dateEnv, context.options, props.dateProfileGenerator); // TODO: cache\n        this.renderSkeleton(context);\n        this.header.receiveProps({\n            dateProfile: props.dateProfile,\n            tDateProfile: tDateProfile\n        }, context);\n        this.slats.receiveProps({\n            dateProfile: props.dateProfile,\n            tDateProfile: tDateProfile\n        }, context);\n    };\n    TimeAxis.prototype.destroy = function () {\n        this.renderSkeleton.unrender();\n        this.layout.destroy();\n        _super.prototype.destroy.call(this);\n    };\n    TimeAxis.prototype._renderSkeleton = function (context) {\n        var layout = this.layout;\n        var headerEnhancedScroller = layout.headerScroller.enhancedScroll;\n        var bodyEnhancedScroller = layout.bodyScroller.enhancedScroll;\n        // needs to go after layout, which has ScrollJoiner\n        this.headStickyScroller = new StickyScroller(headerEnhancedScroller, context.isRtl, false); // isVertical=false\n        this.bodyStickyScroller = new StickyScroller(bodyEnhancedScroller, context.isRtl, false); // isVertical=false\n        this.header = new TimelineHeader(headerEnhancedScroller.canvas.contentEl);\n        this.slats = new TimelineSlats(bodyEnhancedScroller.canvas.bgEl);\n        this.nowIndicator = new TimelineNowIndicator(headerEnhancedScroller.canvas.el, bodyEnhancedScroller.canvas.el);\n    };\n    TimeAxis.prototype._unrenderSkeleton = function () {\n        this.header.destroy();\n        this.slats.destroy();\n        this.nowIndicator.unrender();\n        this.headStickyScroller.destroy();\n        this.bodyStickyScroller.destroy();\n    };\n    // Now Indicator\n    // ------------------------------------------------------------------------------------------\n    TimeAxis.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        var context = this.context;\n        // yuck\n        var tDateProfile = this.tDateProfile =\n            buildTimelineDateProfile(dateProfile, context.dateEnv, context.options, dateProfileGenerator); // TODO: cache\n        if (tDateProfile.isTimeScale) {\n            return greatestDurationDenominator(tDateProfile.slotDuration).unit;\n        }\n    };\n    // will only execute if isTimeScale\n    TimeAxis.prototype.renderNowIndicator = function (date) {\n        if (rangeContainsMarker(this.tDateProfile.normalizedRange, date)) {\n            this.nowIndicator.render(this.dateToCoord(date), this.context.isRtl);\n        }\n    };\n    // will only execute if isTimeScale\n    TimeAxis.prototype.unrenderNowIndicator = function () {\n        this.nowIndicator.unrender();\n    };\n    // Sizing\n    // ------------------------------------------------------------------------------------------\n    TimeAxis.prototype.updateSize = function (isResize, totalHeight, isAuto) {\n        this.applySlotWidth(this.computeSlotWidth());\n        // adjusts gutters. do after slot widths set\n        this.layout.setHeight(totalHeight, isAuto);\n        // pretty much just queries coords. do last\n        this.slats.updateSize();\n    };\n    TimeAxis.prototype.updateStickyScrollers = function () {\n        this.headStickyScroller.updateSize();\n        this.bodyStickyScroller.updateSize();\n    };\n    TimeAxis.prototype.computeSlotWidth = function () {\n        var slotWidth = this.context.options.slotWidth || '';\n        if (slotWidth === '') {\n            slotWidth = this.computeDefaultSlotWidth(this.tDateProfile);\n        }\n        return slotWidth;\n    };\n    TimeAxis.prototype.computeDefaultSlotWidth = function (tDateProfile) {\n        var maxInnerWidth = 0; // TODO: harness core's `matchCellWidths` for this\n        this.header.innerEls.forEach(function (innerEl, i) {\n            maxInnerWidth = Math.max(maxInnerWidth, innerEl.getBoundingClientRect().width);\n        });\n        var headingCellWidth = Math.ceil(maxInnerWidth) + 1; // assume no padding, and one pixel border\n        // in TimelineView.defaults we ensured that labelInterval is an interval of slotDuration\n        // TODO: rename labelDuration?\n        var slotsPerLabel = wholeDivideDurations(tDateProfile.labelInterval, tDateProfile.slotDuration);\n        var slotWidth = Math.ceil(headingCellWidth / slotsPerLabel);\n        var minWidth = window.getComputedStyle(this.header.slatColEls[0]).minWidth;\n        if (minWidth) {\n            minWidth = parseInt(minWidth, 10);\n            if (minWidth) {\n                slotWidth = Math.max(slotWidth, minWidth);\n            }\n        }\n        return slotWidth;\n    };\n    TimeAxis.prototype.applySlotWidth = function (slotWidth) {\n        var _a = this, layout = _a.layout, tDateProfile = _a.tDateProfile;\n        var containerWidth = '';\n        var containerMinWidth = '';\n        var nonLastSlotWidth = '';\n        if (slotWidth !== '') {\n            slotWidth = Math.round(slotWidth);\n            containerWidth = slotWidth * tDateProfile.slotDates.length;\n            containerMinWidth = '';\n            nonLastSlotWidth = slotWidth;\n            var availableWidth = layout.bodyScroller.enhancedScroll.getClientWidth();\n            if (availableWidth > containerWidth) {\n                containerMinWidth = availableWidth;\n                containerWidth = '';\n                nonLastSlotWidth = Math.floor(availableWidth / tDateProfile.slotDates.length);\n            }\n        }\n        layout.headerScroller.enhancedScroll.canvas.setWidth(containerWidth);\n        layout.headerScroller.enhancedScroll.canvas.setMinWidth(containerMinWidth);\n        layout.bodyScroller.enhancedScroll.canvas.setWidth(containerWidth);\n        layout.bodyScroller.enhancedScroll.canvas.setMinWidth(containerMinWidth);\n        if (nonLastSlotWidth !== '') {\n            this.header.slatColEls.slice(0, -1).concat(this.slats.slatColEls.slice(0, -1)).forEach(function (el) {\n                el.style.width = nonLastSlotWidth + 'px';\n                el.style.minWidth = '0'; // prevent the browser from using the actual min-width (issue #6338)\n            });\n        }\n    };\n    // returned value is between 0 and the number of snaps\n    TimeAxis.prototype.computeDateSnapCoverage = function (date) {\n        var tDateProfile = this.tDateProfile;\n        var dateEnv = this.context.dateEnv;\n        var snapDiff = dateEnv.countDurationsBetween(tDateProfile.normalizedRange.start, date, tDateProfile.snapDuration);\n        if (snapDiff < 0) {\n            return 0;\n        }\n        else if (snapDiff >= tDateProfile.snapDiffToIndex.length) {\n            return tDateProfile.snapCnt;\n        }\n        else {\n            var snapDiffInt = Math.floor(snapDiff);\n            var snapCoverage = tDateProfile.snapDiffToIndex[snapDiffInt];\n            if (isInt(snapCoverage)) { // not an in-between value\n                snapCoverage += snapDiff - snapDiffInt; // add the remainder\n            }\n            else {\n                // a fractional value, meaning the date is not visible\n                // always round up in this case. works for start AND end dates in a range.\n                snapCoverage = Math.ceil(snapCoverage);\n            }\n            return snapCoverage;\n        }\n    };\n    // for LTR, results range from 0 to width of area\n    // for RTL, results range from negative width of area to 0\n    TimeAxis.prototype.dateToCoord = function (date) {\n        var tDateProfile = this.tDateProfile;\n        var snapCoverage = this.computeDateSnapCoverage(date);\n        var slotCoverage = snapCoverage / tDateProfile.snapsPerSlot;\n        var slotIndex = Math.floor(slotCoverage);\n        slotIndex = Math.min(slotIndex, tDateProfile.slotCnt - 1);\n        var partial = slotCoverage - slotIndex;\n        var _a = this.slats, innerCoordCache = _a.innerCoordCache, outerCoordCache = _a.outerCoordCache;\n        if (this.context.isRtl) {\n            return (outerCoordCache.rights[slotIndex] -\n                (innerCoordCache.getWidth(slotIndex) * partial)) - outerCoordCache.originClientRect.width;\n        }\n        else {\n            return (outerCoordCache.lefts[slotIndex] +\n                (innerCoordCache.getWidth(slotIndex) * partial));\n        }\n    };\n    TimeAxis.prototype.rangeToCoords = function (range) {\n        if (this.context.isRtl) {\n            return { right: this.dateToCoord(range.start), left: this.dateToCoord(range.end) };\n        }\n        else {\n            return { left: this.dateToCoord(range.start), right: this.dateToCoord(range.end) };\n        }\n    };\n    // Scrolling\n    // ------------------------------------------------------------------------------------------\n    TimeAxis.prototype.computeDateScroll = function (duration) {\n        var _a = this.context, dateEnv = _a.dateEnv, isRtl = _a.isRtl;\n        var dateProfile = this.props.dateProfile;\n        var left = 0;\n        if (dateProfile) {\n            left = this.dateToCoord(dateEnv.add(startOfDay(dateProfile.activeRange.start), // startOfDay needed?\n            duration));\n            // hack to overcome the left borders of non-first slat\n            if (!isRtl && left) {\n                left += 1;\n            }\n        }\n        return { left: left };\n    };\n    TimeAxis.prototype.queryDateScroll = function () {\n        var enhancedScroll = this.layout.bodyScroller.enhancedScroll;\n        return {\n            left: enhancedScroll.getScrollLeft()\n        };\n    };\n    TimeAxis.prototype.applyDateScroll = function (scroll) {\n        // TODO: lame we have to update both. use the scrolljoiner instead maybe\n        this.layout.bodyScroller.enhancedScroll.setScrollLeft(scroll.left || 0);\n        this.layout.headerScroller.enhancedScroll.setScrollLeft(scroll.left || 0);\n    };\n    return TimeAxis;\n}(Component));\n\nvar TimelineLaneEventRenderer = /** @class */ (function (_super) {\n    __extends(TimelineLaneEventRenderer, _super);\n    function TimelineLaneEventRenderer(masterContainerEl, timeAxis) {\n        var _this = _super.call(this) || this;\n        _this.masterContainerEl = masterContainerEl;\n        _this.timeAxis = timeAxis;\n        return _this;\n    }\n    TimelineLaneEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var context = this.context;\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var isDraggable = computeEventDraggable(context, eventDef, eventUi);\n        var isResizableFromStart = seg.isStart && computeEventStartResizable(context, eventDef, eventUi);\n        var isResizableFromEnd = seg.isEnd && computeEventEndResizable(context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        classes.unshift('fc-timeline-event', 'fc-h-event');\n        var timeText = this.getTimeText(eventRange);\n        return '<a class=\"' + classes.join(' ') + '\" style=\"' + cssToStr(this.getSkinCss(eventUi)) + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            '>' +\n            (timeText ?\n                '<span class=\"fc-time-wrap\">' +\n                    '<span class=\"fc-time\">' +\n                    htmlEscape(timeText) +\n                    '</span>' +\n                    '</span>'\n                :\n                    '') +\n            '<span class=\"fc-title-wrap\">' +\n            '<span class=\"fc-title fc-sticky\">' +\n            (eventDef.title ? htmlEscape(eventDef.title) : '&nbsp;') +\n            '</span>' +\n            '</span>' +\n            (isResizableFromStart ?\n                '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                '') +\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    TimelineLaneEventRenderer.prototype.computeDisplayEventTime = function () {\n        return !this.timeAxis.tDateProfile.isTimeScale; // because times should be obvious via axis\n    };\n    TimelineLaneEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return false;\n    };\n    // Computes a default event time formatting string if `timeFormat` is not explicitly defined\n    TimelineLaneEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'narrow'\n        };\n    };\n    TimelineLaneEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        if (!this.el && this.masterContainerEl) {\n            this.el = createElement('div', { className: 'fc-event-container' });\n            if (mirrorInfo) {\n                this.el.classList.add('fc-mirror-container');\n            }\n            this.masterContainerEl.appendChild(this.el);\n        }\n        if (this.el) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                this.el.appendChild(seg.el);\n            }\n        }\n    };\n    TimelineLaneEventRenderer.prototype.detachSegs = function (segs) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            removeElement(seg.el);\n        }\n    };\n    // computes AND assigns (assigns the left/right at least). bad\n    TimelineLaneEventRenderer.prototype.computeSegSizes = function (segs) {\n        var timeAxis = this.timeAxis;\n        for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n            var seg = segs_3[_i];\n            var coords = timeAxis.rangeToCoords(seg); // works because Seg has start/end\n            applyStyle(seg.el, {\n                left: (seg.left = coords.left),\n                right: -(seg.right = coords.right)\n            });\n        }\n    };\n    TimelineLaneEventRenderer.prototype.assignSegSizes = function (segs) {\n        if (!this.el) {\n            return;\n        }\n        // compute seg verticals\n        for (var _i = 0, segs_4 = segs; _i < segs_4.length; _i++) {\n            var seg = segs_4[_i];\n            seg.height = computeHeightAndMargins(seg.el);\n        }\n        this.buildSegLevels(segs); // populates above/below props for computeOffsetForSegs\n        var totalHeight = computeOffsetForSegs(segs); // also assigns seg.top\n        applyStyleProp(this.el, 'height', totalHeight);\n        // assign seg verticals\n        for (var _a = 0, segs_5 = segs; _a < segs_5.length; _a++) {\n            var seg = segs_5[_a];\n            applyStyleProp(seg.el, 'top', seg.top);\n        }\n    };\n    TimelineLaneEventRenderer.prototype.buildSegLevels = function (segs) {\n        var segLevels = [];\n        segs = this.sortEventSegs(segs);\n        for (var _i = 0, segs_6 = segs; _i < segs_6.length; _i++) {\n            var unplacedSeg = segs_6[_i];\n            unplacedSeg.above = [];\n            // determine the first level with no collisions\n            var level = 0; // level index\n            while (level < segLevels.length) {\n                var isLevelCollision = false;\n                // determine collisions\n                for (var _a = 0, _b = segLevels[level]; _a < _b.length; _a++) {\n                    var placedSeg = _b[_a];\n                    if (timeRowSegsCollide(unplacedSeg, placedSeg)) {\n                        unplacedSeg.above.push(placedSeg);\n                        isLevelCollision = true;\n                    }\n                }\n                if (isLevelCollision) {\n                    level += 1;\n                }\n                else {\n                    break;\n                }\n            }\n            // insert into the first non-colliding level. create if necessary\n            (segLevels[level] || (segLevels[level] = []))\n                .push(unplacedSeg);\n            // record possible colliding segments below (TODO: automated test for this)\n            level += 1;\n            while (level < segLevels.length) {\n                for (var _c = 0, _d = segLevels[level]; _c < _d.length; _c++) {\n                    var belowSeg = _d[_c];\n                    if (timeRowSegsCollide(unplacedSeg, belowSeg)) {\n                        belowSeg.above.push(unplacedSeg);\n                    }\n                }\n                level += 1;\n            }\n        }\n        return segLevels;\n    };\n    return TimelineLaneEventRenderer;\n}(FgEventRenderer));\nfunction computeOffsetForSegs(segs) {\n    var max = 0;\n    for (var _i = 0, segs_7 = segs; _i < segs_7.length; _i++) {\n        var seg = segs_7[_i];\n        max = Math.max(max, computeOffsetForSeg(seg));\n    }\n    return max;\n}\nfunction computeOffsetForSeg(seg) {\n    if ((seg.top == null)) {\n        seg.top = computeOffsetForSegs(seg.above);\n    }\n    return seg.top + seg.height;\n}\nfunction timeRowSegsCollide(seg0, seg1) {\n    return (seg0.left < seg1.right) && (seg0.right > seg1.left);\n}\n\nvar TimelineLaneFillRenderer = /** @class */ (function (_super) {\n    __extends(TimelineLaneFillRenderer, _super);\n    function TimelineLaneFillRenderer(masterContainerEl, timeAxis) {\n        var _this = _super.call(this) || this;\n        _this.masterContainerEl = masterContainerEl;\n        _this.timeAxis = timeAxis;\n        return _this;\n    }\n    TimelineLaneFillRenderer.prototype.attachSegs = function (type, segs) {\n        if (segs.length) {\n            var className = void 0;\n            if (type === 'businessHours') {\n                className = 'bgevent';\n            }\n            else {\n                className = type.toLowerCase();\n            }\n            // making a new container each time is OKAY\n            // all types of segs (background or business hours or whatever) are rendered in one pass\n            var containerEl = createElement('div', { className: 'fc-' + className + '-container' });\n            this.masterContainerEl.appendChild(containerEl);\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                containerEl.appendChild(seg.el);\n            }\n            return [containerEl]; // return value\n        }\n    };\n    TimelineLaneFillRenderer.prototype.computeSegSizes = function (segs) {\n        var timeAxis = this.timeAxis;\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            var coords = timeAxis.rangeToCoords(seg);\n            seg.left = coords.left;\n            seg.right = coords.right;\n        }\n    };\n    TimelineLaneFillRenderer.prototype.assignSegSizes = function (segs) {\n        for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n            var seg = segs_3[_i];\n            applyStyle(seg.el, {\n                left: seg.left,\n                right: -seg.right\n            });\n        }\n    };\n    return TimelineLaneFillRenderer;\n}(FillRenderer));\n\nvar TimelineLane = /** @class */ (function (_super) {\n    __extends(TimelineLane, _super);\n    function TimelineLane(fgContainerEl, bgContainerEl, timeAxis) {\n        var _this = _super.call(this, bgContainerEl) || this;\n        _this.slicer = new TimelineLaneSlicer();\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize);\n        _this.fgContainerEl = fgContainerEl;\n        _this.timeAxis = timeAxis;\n        var fillRenderer = _this.fillRenderer = new TimelineLaneFillRenderer(bgContainerEl, timeAxis);\n        var eventRenderer = _this.eventRenderer = new TimelineLaneEventRenderer(fgContainerEl, timeAxis);\n        _this.mirrorRenderer = new TimelineLaneEventRenderer(fgContainerEl, timeAxis);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'));\n        _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'));\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'));\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer));\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        return _this;\n    }\n    TimelineLane.prototype.render = function (props, context) {\n        var timeAxis = this.timeAxis;\n        var slicedProps = this.slicer.sliceProps(props, props.dateProfile, timeAxis.tDateProfile.isTimeScale ? null : props.nextDayThreshold, context.calendar, this, timeAxis);\n        this.renderBusinessHours(context, slicedProps.businessHourSegs);\n        this.renderDateSelection(context, slicedProps.dateSelectionSegs);\n        this.renderBgEvents(context, slicedProps.bgEventSegs);\n        this.renderFgEvents(context, slicedProps.fgEventSegs);\n        this.renderEventSelection(slicedProps.eventSelection);\n        this.renderEventDrag(slicedProps.eventDrag);\n        this.renderEventResize(slicedProps.eventResize);\n    };\n    TimelineLane.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderBusinessHours.unrender();\n        this.renderDateSelection.unrender();\n        this.renderBgEvents.unrender();\n        this.renderFgEvents.unrender();\n        this.renderEventSelection.unrender();\n        this.renderEventDrag.unrender();\n        this.renderEventResize.unrender();\n    };\n    TimelineLane.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimelineLane.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimelineLane.prototype._renderEventResize = function (state) {\n        if (state) {\n            // HACK. eventRenderer and fillRenderer both use these segs. would compete over seg.el\n            var segsForHighlight = state.segs.map(function (seg) {\n                return __assign({}, seg);\n            });\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, segsForHighlight);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimelineLane.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    TimelineLane.prototype.updateSize = function (isResize) {\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    return TimelineLane;\n}(DateComponent));\nvar TimelineLaneSlicer = /** @class */ (function (_super) {\n    __extends(TimelineLaneSlicer, _super);\n    function TimelineLaneSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimelineLaneSlicer.prototype.sliceRange = function (origRange, timeAxis) {\n        var tDateProfile = timeAxis.tDateProfile;\n        var _a = timeAxis.props, dateProfile = _a.dateProfile, dateProfileGenerator = _a.dateProfileGenerator;\n        var dateEnv = timeAxis.context.dateEnv;\n        var normalRange = normalizeRange(origRange, tDateProfile, dateEnv);\n        var segs = [];\n        // protect against when the span is entirely in an invalid date region\n        if (timeAxis.computeDateSnapCoverage(normalRange.start) < timeAxis.computeDateSnapCoverage(normalRange.end)) {\n            // intersect the footprint's range with the grid's range\n            var slicedRange = intersectRanges(normalRange, tDateProfile.normalizedRange);\n            if (slicedRange) {\n                segs.push({\n                    start: slicedRange.start,\n                    end: slicedRange.end,\n                    isStart: slicedRange.start.valueOf() === normalRange.start.valueOf() && isValidDate(slicedRange.start, tDateProfile, dateProfile, dateProfileGenerator),\n                    isEnd: slicedRange.end.valueOf() === normalRange.end.valueOf() && isValidDate(addMs(slicedRange.end, -1), tDateProfile, dateProfile, dateProfileGenerator)\n                });\n            }\n        }\n        return segs;\n    };\n    return TimelineLaneSlicer;\n}(Slicer));\n\nvar TimelineView = /** @class */ (function (_super) {\n    __extends(TimelineView, _super);\n    function TimelineView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.startInteractive = memoizeRendering(_this._startInteractive, _this._stopInteractive);\n        return _this;\n    }\n    TimelineView.prototype._startInteractive = function (timeAxisEl) {\n        this.context.calendar.registerInteractiveComponent(this, {\n            el: timeAxisEl\n        });\n    };\n    TimelineView.prototype._stopInteractive = function () {\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    TimelineView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // flags for updateSize, addScroll. and _renderSkeleton/_unrenderSkeleton\n        this.renderSkeleton(this.context);\n        this.timeAxis.receiveProps({\n            dateProfileGenerator: props.dateProfileGenerator,\n            dateProfile: props.dateProfile\n        }, context);\n        this.startInteractive(this.timeAxis.slats.el);\n        this.lane.receiveProps(__assign({}, props, { nextDayThreshold: this.context.nextDayThreshold }), context);\n        this.startNowIndicator(props.dateProfile, props.dateProfileGenerator);\n    };\n    TimelineView.prototype.destroy = function () {\n        this.startInteractive.unrender(); // \"unrender\" a weird name\n        this.renderSkeleton.unrender();\n        _super.prototype.destroy.call(this);\n    };\n    TimelineView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-timeline');\n        if (context.options.eventOverlap === false) {\n            this.el.classList.add('fc-no-overlap');\n        }\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.timeAxis = new TimeAxis(this.el.querySelector('thead .fc-time-area'), this.el.querySelector('tbody .fc-time-area'));\n        this.lane = new TimelineLane(this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.contentEl, this.timeAxis.layout.bodyScroller.enhancedScroll.canvas.bgEl, this.timeAxis);\n    };\n    TimelineView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-timeline');\n        this.el.classList.remove('fc-no-overlap');\n        this.timeAxis.destroy();\n        this.lane.destroy();\n    };\n    TimelineView.prototype.renderSkeletonHtml = function () {\n        var theme = this.context.theme;\n        return \"<table class=\\\"\" + theme.getClass('tableGrid') + \"\\\"> <thead class=\\\"fc-head\\\"> <tr> <td class=\\\"fc-time-area \" + theme.getClass('widgetHeader') + \"\\\"></td> </tr> </thead> <tbody class=\\\"fc-body\\\"> <tr> <td class=\\\"fc-time-area \" + theme.getClass('widgetContent') + \"\\\"></td> </tr> </tbody> </table>\";\n    };\n    TimelineView.prototype.updateSize = function (isResize, totalHeight, isAuto) {\n        this.timeAxis.updateSize(isResize, totalHeight, isAuto);\n        this.lane.updateSize(isResize);\n    };\n    // Now Indicator\n    // ------------------------------------------------------------------------------------------\n    TimelineView.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        return this.timeAxis.getNowIndicatorUnit(dateProfile, dateProfileGenerator);\n    };\n    TimelineView.prototype.renderNowIndicator = function (date) {\n        this.timeAxis.renderNowIndicator(date);\n    };\n    TimelineView.prototype.unrenderNowIndicator = function () {\n        this.timeAxis.unrenderNowIndicator();\n    };\n    // Scroll System\n    // ------------------------------------------------------------------------------------------\n    TimelineView.prototype.computeDateScroll = function (duration) {\n        return this.timeAxis.computeDateScroll(duration);\n    };\n    TimelineView.prototype.applyScroll = function (scroll, isResize) {\n        _super.prototype.applyScroll.call(this, scroll, isResize); // will call applyDateScroll\n        var calendar = this.context.calendar;\n        // avoid updating stickyscroll too often\n        // TODO: repeat code as ResourceTimelineView::updateSize\n        if (isResize || calendar.isViewUpdated || calendar.isDatesUpdated || calendar.isEventsUpdated) {\n            this.timeAxis.updateStickyScrollers();\n        }\n    };\n    TimelineView.prototype.applyDateScroll = function (scroll) {\n        this.timeAxis.applyDateScroll(scroll);\n    };\n    TimelineView.prototype.queryScroll = function () {\n        var enhancedScroll = this.timeAxis.layout.bodyScroller.enhancedScroll;\n        return {\n            top: enhancedScroll.getScrollTop(),\n            left: enhancedScroll.getScrollLeft()\n        };\n    };\n    // Hit System\n    // ------------------------------------------------------------------------------------------\n    TimelineView.prototype.buildPositionCaches = function () {\n        this.timeAxis.slats.updateSize();\n    };\n    TimelineView.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        var slatHit = this.timeAxis.slats.positionToHit(positionLeft);\n        if (slatHit) {\n            return {\n                component: this,\n                dateSpan: slatHit.dateSpan,\n                rect: {\n                    left: slatHit.left,\n                    right: slatHit.right,\n                    top: 0,\n                    bottom: elHeight\n                },\n                dayEl: slatHit.dayEl,\n                layer: 0\n            };\n        }\n    };\n    return TimelineView;\n}(View));\n\nvar main = createPlugin({\n    defaultView: 'timelineDay',\n    views: {\n        timeline: {\n            class: TimelineView,\n            eventResizableFromStart: true // how is this consumed for TimelineView tho?\n        },\n        timelineDay: {\n            type: 'timeline',\n            duration: { days: 1 }\n        },\n        timelineWeek: {\n            type: 'timeline',\n            duration: { weeks: 1 }\n        },\n        timelineMonth: {\n            type: 'timeline',\n            duration: { months: 1 }\n        },\n        timelineYear: {\n            type: 'timeline',\n            duration: { years: 1 }\n        }\n    }\n});\n\nexport default main;\nexport { HeaderBodyLayout, ScrollJoiner, StickyScroller, TimeAxis, TimelineLane, TimelineView };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}